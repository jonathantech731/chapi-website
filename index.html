<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CHAPI Â· Chatbots Inteligentes</title>
        <style>
            :root {
                --bg: #0a0d14;
                --bg-soft: #111722;
                --panel: #161c27;
                --glass: rgba(22, 28, 39, 0.8);
                --text: #e8eef8;
                --muted: #a9b3c4;
                --brand: #2f7afe;
                --brand-light: #4a8bff;
                --accent: #00d4a6;
                --accent-light: #1ae6b8;
                --warn: #ffb020;
                --success: #10b981;
                --radius: 16px;
                --shadow: 0 20px 40px rgba(0, 0, 0, .4);
                --shadow-soft: 0 10px 30px rgba(0, 0, 0, .2);
                --max: 1200px;
                --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            * {
                box-sizing: border-box;
            }

            html {
                scroll-behavior: smooth;
            }

            body {
                margin: 0;
                background: var(--bg);
                color: var(--text);
                font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Helvetica, Arial, sans-serif;
                line-height: 1.6;
                overflow-x: hidden;
            }

            /* Animated background */
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background:
                    radial-gradient(circle at 20% 80%, rgba(47, 122, 254, 0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(0, 212, 166, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(47, 122, 254, 0.08) 0%, transparent 50%);
                z-index: -1;
                animation: backgroundFloat 20s ease-in-out infinite;
            }

            @keyframes backgroundFloat {

                0%,
                100% {
                    transform: translateY(0);
                }

                50% {
                    transform: translateY(-20px);
                }
            }

            /* Animations */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(40px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes scaleIn {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }

                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            @keyframes glow {

                0%,
                100% {
                    box-shadow: 0 0 20px rgba(47, 122, 254, 0.3);
                }

                50% {
                    box-shadow: 0 0 30px rgba(47, 122, 254, 0.5);
                }
            }

            .animate-fadeInUp {
                animation: fadeInUp 0.8s ease-out forwards;
            }

            .animate-scaleIn {
                animation: scaleIn 0.6s ease-out forwards;
            }

            .animate-delay-1 {
                animation-delay: 0.1s;
            }

            .animate-delay-2 {
                animation-delay: 0.2s;
            }

            .animate-delay-3 {
                animation-delay: 0.3s;
            }

            /* Typography */
            h1,
            h2,
            h3 {
                font-weight: 700;
                letter-spacing: -0.025em;
            }

            a {
                color: var(--brand);
                text-decoration: none;
                transition: var(--transition);
            }

            .wrap {
                max-width: var(--max);
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Enhanced Buttons */
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 16px 24px;
                border-radius: 12px;
                font-weight: 600;
                font-size: 15px;
                border: 1px solid transparent;
                cursor: pointer;
                transition: var(--transition);
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.5s;
            }

            .btn:hover::before {
                left: 100%;
            }

            .btn-primary {
                background: linear-gradient(135deg, var(--brand), var(--brand-light));
                color: #fff;
                box-shadow: 0 8px 20px rgba(47, 122, 254, 0.3);
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 30px rgba(47, 122, 254, 0.4);
            }

            .btn-ghost {
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: var(--text);
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
            }

            .btn-ghost:hover {
                background: rgba(255, 255, 255, 0.1);
                border-color: rgba(255, 255, 255, 0.2);
                transform: translateY(-1px);
            }

            .btn-accent {
                background: linear-gradient(135deg, var(--accent), var(--accent-light));
                color: #001a14;
                box-shadow: 0 8px 20px rgba(0, 212, 166, 0.3);
            }

            .btn-accent:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 30px rgba(0, 212, 166, 0.4);
            }

            /* Enhanced Tags */
            .tag {
                display: inline-block;
                padding: 8px 12px;
                border-radius: 999px;
                background: rgba(47, 122, 254, 0.15);
                color: #bcd4ff;
                border: 1px solid rgba(47, 122, 254, 0.3);
                font-size: 12px;
                font-weight: 500;
                letter-spacing: 0.5px;
                backdrop-filter: blur(10px);
            }

            /* Header */
            header {
                position: sticky;
                top: 0;
                background: rgba(12, 15, 20, 0.9);
                backdrop-filter: blur(20px);
                z-index: 50;
                border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                transition: var(--transition);
            }

            .nav {
                display: flex;
                align-items: center;
                justify-content: space-between;
                height: 70px;
            }

            .nav .left {
                display: flex;
                gap: 16px;
                align-items: center;
            }

            .nav .brand {
                font-weight: 800;
                font-size: 20px;
                letter-spacing: 0.5px;
                background: linear-gradient(135deg, var(--brand), var(--accent));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .nav ul {
                list-style: none;
                margin: 0;
                padding: 0;
                display: flex;
                gap: 24px;
            }

            .nav li a {
                color: var(--muted);
                padding: 10px 16px;
                border-radius: 10px;
                font-weight: 500;
                transition: var(--transition);
            }

            .nav li a:hover {
                background: rgba(255, 255, 255, 0.08);
                color: var(--text);
                transform: translateY(-1px);
            }

            /* Hero Section */
            .hero {
                padding: 100px 0 60px;
                position: relative;
                overflow: hidden;
            }

            .hero .grid {
                display: grid;
                grid-template-columns: 1.2fr 0.8fr;
                gap: 50px;
                align-items: center;
            }

            .hero h1 {
                font-size: clamp(32px, 5vw, 52px);
                line-height: 1.1;
                margin: 20px 0 16px;
                background: linear-gradient(135deg, var(--text), #a3b3d1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .hero p.lead {
                color: var(--muted);
                font-size: 19px;
                margin: 0 0 28px;
                line-height: 1.7;
            }

            .hero .panel {
                background: var(--glass);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                overflow: hidden;
                backdrop-filter: blur(20px);
                position: relative;
            }

            .hero .panel::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            }

            .hero img,
            .hero video {
                width: 100%;
                display: block;
                transition: var(--transition);
            }

            .hero .panel:hover img,
            .hero .panel:hover video {
                transform: scale(1.05);
            }

            /* Trust Section */
            .trust {
                padding: 30px 0 20px;
                color: var(--muted);
                font-size: 14px;
            }

            .trust .logos {
                display: flex;
                gap: 32px;
                flex-wrap: wrap;
                opacity: 0.8;
                margin-top: 16px;
            }

            /* Block Sections */
            section.block {
                padding: 80px 0;
                border-top: 1px solid rgba(255, 255, 255, 0.06);
                position: relative;
            }

            h2.section-title {
                font-size: clamp(28px, 4vw, 36px);
                margin: 0 0 12px;
                text-align: center;
            }

            p.section-sub {
                color: var(--muted);
                margin: 0 0 40px;
                text-align: center;
                font-size: 18px;
            }

            /* Enhanced Cards */
            .features {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 24px;
            }

            .card {
                background: var(--glass);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--radius);
                padding: 28px;
                box-shadow: var(--shadow-soft);
                backdrop-filter: blur(20px);
                transition: var(--transition);
                position: relative;
                overflow: hidden;
            }

            .card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 2px;
                background: linear-gradient(90deg, var(--brand), var(--accent));
                transform: scaleX(0);
                transition: var(--transition);
            }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: var(--shadow);
                border-color: rgba(255, 255, 255, 0.2);
            }

            .card:hover::before {
                transform: scaleX(1);
            }

            .card h3 {
                margin: 0 0 8px;
                font-size: 20px;
            }

            .card p {
                margin: 0;
                color: var(--muted);
                line-height: 1.6;
            }

            .card .top {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 12px;
            }

            .kpi {
                font-weight: 700;
                color: var(--accent);
                font-size: 14px;
                background: rgba(0, 212, 166, 0.1);
                padding: 4px 8px;
                border-radius: 6px;
            }

            /* Steps */
            .steps {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 24px;
            }

            .step {
                padding: 32px;
                background: linear-gradient(135deg, #141c29, #0f141d);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--radius);
                transition: var(--transition);
                position: relative;
            }

            .step:hover {
                transform: translateY(-3px);
                border-color: var(--brand);
            }

            .step .num {
                width: 40px;
                height: 40px;
                border-radius: 12px;
                background: linear-gradient(135deg, var(--brand), var(--brand-light));
                color: #fff;
                display: inline-grid;
                place-items: center;
                font-weight: 800;
                margin-bottom: 16px;
                font-size: 18px;
            }

            /* Integrations */
            .integrations {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 16px;
            }

            .pill {
                border: 1px dashed rgba(255, 255, 255, 0.2);
                border-radius: 999px;
                padding: 14px 18px;
                text-align: center;
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                transition: var(--transition);
                font-weight: 500;
            }

            .pill:hover {
                background: rgba(255, 255, 255, 0.1);
                border-style: solid;
                transform: translateY(-2px);
            }

            /* Pricing */
            .pricing {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 24px;
            }

            .plan {
                padding: 36px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--radius);
                background: linear-gradient(135deg, #121a27, #0d131c);
                transition: var(--transition);
                position: relative;
            }

            .plan .price {
                font-size: 42px;
                font-weight: 800;
                margin: 10px 0;
                background: linear-gradient(135deg, var(--text), var(--muted));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .plan .inc {
                color: var(--muted);
                margin: 0 0 12px;
            }

            .plan.best {
                border-color: var(--brand);
                box-shadow: 0 0 0 2px rgba(47, 122, 254, 0.2);
                transform: scale(1.05);
            }

            .plan.best::before {
                content: 'MÃ¡s Popular';
                position: absolute;
                top: -12px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, var(--brand), var(--brand-light));
                color: white;
                padding: 6px 16px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 600;
            }

            .bul {
                margin: 20px 0 24px;
                padding: 0;
                list-style: none;
            }

            .bul li {
                margin: 10px 0;
                color: var(--text);
                padding-left: 20px;
                position: relative;
            }

            .bul li::before {
                content: 'â';
                position: absolute;
                left: 0;
                color: var(--success);
                font-weight: bold;
            }

            /* Grid layouts */
            .grid-2 {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                gap: 24px;
            }

            .quote {
                font-style: italic;
                color: #d7e6ff;
                font-size: 18px;
                line-height: 1.6;
            }

            .author {
                color: var(--muted);
                font-size: 14px;
                margin-top: 12px;
            }

            /* FAQ */
            details.faq {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 12px;
                backdrop-filter: blur(10px);
                transition: var(--transition);
            }

            details.faq:hover {
                background: rgba(255, 255, 255, 0.08);
            }

            details summary {
                cursor: pointer;
                font-weight: 600;
                padding: 8px 0;
            }

            details[open] summary {
                margin-bottom: 12px;
                color: var(--brand);
            }

            /* Contact Form */
            .contact .panel {
                padding: 36px;
            }

            input,
            textarea {
                width: 100%;
                padding: 16px 18px;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 12px;
                color: var(--text);
                font-family: inherit;
                transition: var(--transition);
                backdrop-filter: blur(10px);
            }

            input:focus,
            textarea:focus {
                outline: none;
                border-color: var(--brand);
                background: rgba(255, 255, 255, 0.08);
                box-shadow: 0 0 0 3px rgba(47, 122, 254, 0.1);
            }

            textarea {
                min-height: 120px;
                resize: vertical;
            }

            .stack {
                display: grid;
                gap: 16px;
            }

            /* Footer */
            footer {
                padding: 50px 0;
                color: #93a0b6;
                font-size: 14px;
                border-top: 1px solid rgba(255, 255, 255, 0.06);
                background: linear-gradient(135deg, #0a0d14, #0f1419);
            }

            .cols {
                display: grid;
                grid-template-columns: 2fr 1fr 1fr;
                gap: 24px;
            }

            .muted {
                color: var(--muted);
            }

            /* Mobile Menu */
            .mobile-menu-btn {
                display: none;
                background: none;
                border: none;
                color: var(--text);
                font-size: 24px;
                cursor: pointer;
            }

            /* Responsive Design */
            @media (max-width: 1024px) {
                .hero .grid {
                    grid-template-columns: 1fr;
                    gap: 40px;
                    text-align: center;
                }

                .features {
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                }

                .steps,
                .pricing {
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                }

                .integrations {
                    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                }

                .grid-2 {
                    grid-template-columns: 1fr;
                }

                .cols {
                    grid-template-columns: 1fr;
                }

                .plan.best {
                    transform: none;
                }
            }

            @media (max-width: 768px) {
                .nav ul {
                    display: none;
                }

                .mobile-menu-btn {
                    display: block;
                }

                .hero {
                    padding: 60px 0 40px;
                }

                .hero h1 {
                    font-size: 28px;
                }

                section.block {
                    padding: 60px 0;
                }

                .features,
                .steps,
                .pricing {
                    grid-template-columns: 1fr;
                }

                .integrations {
                    grid-template-columns: repeat(2, 1fr);
                }

                .card {
                    padding: 24px;
                }
            }

            /* Loading Animation */
            .loading {
                opacity: 0;
                animation: fadeInUp 0.8s ease-out 0.1s forwards;
            }

            /* Scroll Indicator */
            .scroll-indicator {
                position: fixed;
                top: 70px;
                left: 0;
                width: 0%;
                height: 3px;
                background: linear-gradient(90deg, var(--brand), var(--accent));
                z-index: 100;
                transition: width 0.3s ease;
            }

            /* =================================
           ESTILOS DEL WIDGET CHAPI
        ================================= */

            #chapiProfessionalWidget {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 999999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            }

            /* BotÃ³n flotante principal */
            #chapiFloatingBtn {
                width: 64px;
                height: 64px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--brand), var(--accent));
                border: none;
                cursor: pointer;
                color: white;
                font-size: 28px;
                box-shadow: 0 8px 25px rgba(47, 122, 254, 0.4);
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                position: relative;
                animation: gentleBounce 3s infinite ease-in-out;
            }

            #chapiFloatingBtn:hover {
                transform: translateY(-3px) scale(1.05);
                box-shadow: 0 12px 35px rgba(47, 122, 254, 0.5);
            }

            /* Indicador de pulso */
            .pulse-indicator {
                position: absolute;
                top: -3px;
                right: -3px;
                width: 16px;
                height: 16px;
                background: var(--accent);
                border-radius: 50%;
                border: 3px solid var(--bg);
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                    opacity: 1;
                }

                50% {
                    transform: scale(1.2);
                    opacity: 0.7;
                }

                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            @keyframes gentleBounce {

                0%,
                100% {
                    transform: translateY(0);
                }

                50% {
                    transform: translateY(-8px);
                }
            }

            /* Ventana de chat */
            #chapiChatWindow {
                position: absolute;
                bottom: 80px;
                right: 0;
                width: 380px;
                height: 520px;
                background: var(--glass);
                border-radius: 20px;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                display: none;
                flex-direction: column;
                overflow: hidden;
                animation: slideUp 0.4s ease-out;
            }

            @keyframes slideUp {
                from {
                    opacity: 0;
                    transform: translateY(30px) scale(0.95);
                }

                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }

            /* Header del chat */
            .chat-header {
                padding: 20px;
                background: linear-gradient(135deg, var(--brand), var(--accent));
                color: white;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .chat-header h3 {
                margin: 0;
                font-size: 18px;
                font-weight: 600;
            }

            #chapiCloseBtn {
                background: none;
                border: none;
                color: white;
                font-size: 24px;
                cursor: pointer;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                transition: background 0.2s ease;
            }

            #chapiCloseBtn:hover {
                background: rgba(255, 255, 255, 0.1);
            }

            /* Barra de progreso */
            .progress-container {
                padding: 15px 20px 10px;
                background: rgba(255, 255, 255, 0.05);
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .progress-bar {
                height: 6px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 3px;
                overflow: hidden;
                margin-bottom: 8px;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, var(--brand), var(--accent));
                border-radius: 3px;
                transition: width 0.6s ease;
                width: 14.3%;
                /* Paso 1 de 7 */
            }

            .step-indicator {
                font-size: 12px;
                color: var(--muted);
                font-weight: 500;
            }

            /* Ãrea de mensajes */
            .chat-messages {
                flex: 1;
                padding: 20px;
                overflow-y: auto;
                background: var(--bg-soft);
                color: var(--text);
            }

            .chat-messages::-webkit-scrollbar {
                width: 6px;
            }

            .chat-messages::-webkit-scrollbar-track {
                background: transparent;
            }

            .chat-messages::-webkit-scrollbar-thumb {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 3px;
            }

            /* Estilos de mensajes */
            .message {
                margin-bottom: 16px;
                animation: fadeInMessage 0.4s ease-out;
            }

            @keyframes fadeInMessage {
                from {
                    opacity: 0;
                    transform: translateY(15px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .bot-message {
                background: var(--glass);
                padding: 16px 18px;
                border-radius: 18px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                margin-right: 50px;
                line-height: 1.5;
                backdrop-filter: blur(10px);
            }

            .user-message {
                background: linear-gradient(135deg, var(--brand), var(--accent));
                color: white;
                padding: 12px 18px;
                border-radius: 18px;
                margin-left: 50px;
                text-align: right;
                line-height: 1.4;
            }

            .typing-indicator {
                background: var(--glass);
                padding: 16px 18px;
                border-radius: 18px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin-right: 50px;
                color: var(--muted);
                font-style: italic;
                display: flex;
                align-items: center;
                gap: 10px;
                backdrop-filter: blur(10px);
            }

            .typing-dots {
                display: flex;
                gap: 4px;
            }

            .typing-dots span {
                width: 8px;
                height: 8px;
                background: var(--brand);
                border-radius: 50%;
                animation: typingDots 1.4s infinite;
            }

            .typing-dots span:nth-child(2) {
                animation-delay: 0.2s;
            }

            .typing-dots span:nth-child(3) {
                animation-delay: 0.4s;
            }

            @keyframes typingDots {

                0%,
                60%,
                100% {
                    transform: translateY(0);
                }

                30% {
                    transform: translateY(-12px);
                }
            }

            /* Botones de acciÃ³n rÃ¡pida */
            .quick-buttons {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 12px;
            }

            .quick-btn {
                padding: 8px 16px;
                background: rgba(255, 255, 255, 0.05);
                border: 2px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                color: var(--text);
                cursor: pointer;
                font-size: 13px;
                font-weight: 500;
                transition: all 0.3s ease;
            }

            .quick-btn:hover {
                background: var(--brand);
                color: white;
                border-color: var(--brand);
                transform: translateY(-2px);
            }

            /* Input del chat */
            .chat-input-container {
                padding: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                background: rgba(255, 255, 255, 0.02);
                display: flex;
                gap: 12px;
                align-items: center;
            }

            #chatInput {
                flex: 1;
                padding: 12px 18px;
                border: 2px solid rgba(255, 255, 255, 0.1);
                border-radius: 25px;
                outline: none;
                font-size: 14px;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.05);
                color: var(--text);
                font-family: inherit;
            }

            #chatInput:focus {
                border-color: var(--brand);
                background: rgba(255, 255, 255, 0.08);
                box-shadow: 0 0 0 3px rgba(47, 122, 254, 0.1);
            }

            #sendBtn {
                padding: 12px 24px;
                background: linear-gradient(135deg, var(--brand), var(--accent));
                border: none;
                border-radius: 25px;
                color: white;
                cursor: pointer;
                font-weight: 600;
                font-size: 14px;
                transition: all 0.3s ease;
            }

            #sendBtn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(47, 122, 254, 0.3);
            }

            #sendBtn:disabled {
                opacity: 0.6;
                cursor: not-allowed;
                transform: none;
            }

            /* Responsivo para el widget */
            @media (max-width: 480px) {
                #chapiChatWindow {
                    width: calc(100vw - 20px);
                    height: calc(100vh - 100px);
                    bottom: 10px;
                    right: 10px;
                    border-radius: 16px;
                }

                #chapiFloatingBtn {
                    bottom: 15px;
                    right: 15px;
                    width: 56px;
                    height: 56px;
                    font-size: 24px;
                }
            }

        </style>
    </head>

    <body>
        <!-- Scroll Indicator -->
        <div class="scroll-indicator" id="scrollIndicator"></div>

        <header>
            <div class="wrap nav">
                <div class="left">
                    <div class="brand">CHAPI Â· Chatbots Inteligentes</div>
                    <span class="tag">Ventas Â· Soporte Â· AutomatizaciÃ³n</span>
                </div>
                <nav>
                    <ul id="navMenu">
                        <li><a href="#features">Funciones</a></li>
                        <li><a href="#steps">CÃ³mo funciona</a></li>
                        <li><a href="#pricing">Planes</a></li>
                        <li><a href="#demo">Demo</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                    <button class="mobile-menu-btn" id="mobileMenuBtn">â°</button>
                </nav>
            </div>
        </header>

        <!-- Hero -->
        <section class="hero">
            <div class="wrap grid">
                <div class="loading">
                    <h1>Chatbots de ventas que cierran oportunidades 24/7</h1>
                    <p class="lead">ImplementaciÃ³n profesional en WhatsApp, Telegram y Web. Integramos tu negocio con
                        automatizaciones reales (n8n, CRMs, pago), sin depender de la nube si lo necesitas.</p>
                    <div style="display:flex;gap:16px;flex-wrap:wrap;margin:32px 0;">
                        <a href="#demo" class="btn btn-primary">
                            <span>ð</span> Probar demo
                        </a>
                        <a href="#pricing" class="btn btn-ghost">Ver planes</a>
                        <a href="#contacto" class="btn btn-accent">Cotizar proyecto</a>
                    </div>
                    <div class="trust">
                        <div><strong>Conectado con:</strong> Stripe Â· MercadoPago Â· Gmail Â· Google Sheets Â· APIs propias
                        </div>
                    </div>
                </div>
                <div class="panel loading animate-delay-2">
                    <!-- Video Demo de CHAPI -->
                    <div class="video-container">
                        <!-- Video demo oficial de CHAPI -->
                        <iframe src="https://www.youtube.com/embed/kxe0WOkGOvE?rel=0&showinfo=0&modestbranding=1"
                            title="CHAPI Chatbot Demo - AutomatizaciÃ³n de Ventas 24/7" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen loading="lazy">
                        </iframe>
                    </div>

                    <!-- Fallback para cuando no hay video -->
                    <div class="video-placeholder" style="display: none;">
                        ð¬ Video Demo de CHAPI<br>
                        <small style="font-size: 14px; margin-top: 8px; display: block;">
                            DemostraciÃ³n completa del chatbot en acciÃ³n
                        </small>
                        <button class="btn btn-primary" style="margin-top: 16px;"
                            onclick="document.querySelector('.video-container').style.display='block'; this.parentElement.style.display='none';">
                            â¶ï¸ Ver Demo
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section id="features" class="block">
            <div class="wrap">
                <h2 class="section-title loading">Funciones clave para vender mÃ¡s</h2>
                <p class="section-sub loading">Pensadas para PyMES y equipos comerciales que necesitan resultados
                    medibles.</p>
                <div class="features">
                    <div class="card loading animate-delay-1">
                        <div class="top">
                            <h3>ð¯ Embudo automatizado</h3>
                            <span class="kpi">+30% conversiÃ³n</span>
                        </div>
                        <p>Captura, califica y agenda automÃ¡ticamente. Seguimiento con recordatorios y notas en CRM.</p>
                    </div>
                    <div class="card loading animate-delay-2">
                        <div class="top">
                            <h3>ð§  IA en respuestas</h3>
                            <span class="kpi">Contexto real</span>
                        </div>
                        <p>Respuestas naturales con memoria y reglas. Control de tono y lÃ­mites para evitar errores.</p>
                    </div>
                    <div class="card loading animate-delay-3">
                        <div class="top">
                            <h3>ð± Multicanal</h3>
                            <span class="kpi">WhatsApp Â· Telegram Â· Web</span>
                        </div>
                        <p>Un solo asistente en todos los canales. Panel Ãºnico de conversaciones e indicadores.</p>
                    </div>
                    <div class="card loading animate-delay-1">
                        <div class="top">
                            <h3>ð Integraciones</h3>
                            <span class="kpi">n8n Â· APIs</span>
                        </div>
                        <p>Conecta pagos, catÃ¡logos, hojas de cÃ¡lculo y correo. Flujos escalables, auditables y sin
                            vendor lock-in.</p>
                    </div>
                    <div class="card loading animate-delay-2">
                        <div class="top">
                            <h3>ð Plantillas listas</h3>
                            <span class="kpi">Sectorizadas</span>
                        </div>
                        <p>Ventas, soporte, reservas, leads inmobiliarios, clÃ­nicas, restaurantes, e-commerce.</p>
                    </div>
                    <div class="card loading animate-delay-3">
                        <div class="top">
                            <h3>ð MÃ©tricas</h3>
                            <span class="kpi">Dashboard</span>
                        </div>
                        <p>Tasa de respuesta, conversaciones, conversiones, embudos por canal y agente.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Steps -->
        <section id="steps" class="block">
            <div class="wrap">
                <h2 class="section-title loading">CÃ³mo funciona</h2>
                <p class="section-sub loading">En tres pasos estÃ¡s vendiendo con tu asistente.</p>
                <div class="steps">
                    <div class="step loading animate-delay-1">
                        <div class="num">1</div>
                        <h3>Definimos objetivos</h3>
                        <p>Guion de ventas, preguntas frecuentes, fuentes de datos y canales.</p>
                    </div>
                    <div class="step loading animate-delay-2">
                        <div class="num">2</div>
                        <h3>Configuramos el flujo</h3>
                        <p>Plantillas + IA + reglas. ConexiÃ³n n8n y CRM. Pruebas controladas.</p>
                    </div>
                    <div class="step loading animate-delay-3">
                        <div class="num">3</div>
                        <h3>Lanzamiento y mejora</h3>
                        <p>Monitoreo, mÃ©tricas y optimizaciÃ³n continua para maximizar cierre.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Integrations -->
        <section class="block">
            <div class="wrap">
                <h2 class="section-title loading">Integraciones</h2>
                <p class="section-sub loading">Conectamos con tus herramientas actuales.</p>
                <div class="integrations">
                    <div class="pill loading">WhatsApp Business API</div>
                    <div class="pill loading">Telegram Bot</div>
                    <div class="pill loading">Widget Web</div>
                    <div class="pill loading">Google Sheets</div>
                    <div class="pill loading">Stripe / MercadoPago</div>
                    <div class="pill loading">Gmail / SMTP</div>
                    <div class="pill loading">Make / Zapier</div>
                    <div class="pill loading">CRMs</div>
                    <div class="pill loading">Webhooks</div>
                    <div class="pill loading">n8n</div>
                    <div class="pill loading">REST APIs</div>
                    <div class="pill loading">Bases de datos</div>
                </div>
            </div>
        </section>

        <!-- Demo -->
        <section id="demo" class="block">
            <div class="wrap grid-2">
                <div class="card loading">
                    <h3>ð Probar demo en vivo</h3>
                    <p class="muted">Experimenta nuestro chatbot en acciÃ³n:</p>
                    <div style="display: flex; flex-direction: column; gap: 16px; margin: 20px 0;">
                        <a class="btn btn-primary"
                            href="https://wa.me/525500000000?text=Hola%20quiero%20probar%20el%20chatbot" target="_blank"
                            rel="noopener">
                            <span>ð±</span> Demo WhatsApp
                        </a>
                        <a class="btn btn-ghost" href="https://t.me/demo_bot" target="_blank" rel="noopener">
                            <span>âï¸</span> Demo Telegram
                        </a>
                    </div>
                </div>
                <div class="panel loading animate-delay-1">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cdefs%3E%3ClinearGradient id='demobg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23161c27'/%3E%3Cstop offset='100%25' style='stop-color:%23121722'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='300' fill='url(%23demobg)' rx='16'/%3E%3Crect x='20' y='20' width='360' height='40' fill='%232f7afe' rx='20'/%3E%3Ctext x='200' y='45' text-anchor='middle' fill='white' font-size='14'%3EDemo Interactivo%3C/text%3E%3Crect x='20' y='80' width='280' height='30' fill='%2300d4a6' opacity='0.8' rx='15'/%3E%3Ctext x='30' y='100' fill='%23001a14' font-size='12'%3EÂ¡Hola! Â¿En quÃ© puedo ayudarte?%3C/text%3E%3Crect x='100' y='130' width='280' height='30' fill='%23e8eef8' opacity='0.9' rx='15'/%3E%3Ctext x='110' y='150' fill='%230a0d14' font-size='12'%3EQuiero informaciÃ³n sobre precios%3C/text%3E%3C/svg%3E"
                        alt="Demo preview">
                </div>
            </div>
        </section>

        <!-- Pricing -->
        <section id="pricing" class="block">
            <div class="wrap">
                <h2 class="section-title loading">Planes y precios</h2>
                <p class="section-sub loading">Todos incluyen soporte y mÃ©tricas bÃ¡sicas. FacturaciÃ³n mensual.</p>
                <div class="pricing">
                    <div class="plan loading animate-delay-1">
                        <div class="tag">Inicio</div>
                        <div class="price">$49<span style="font-size: 18px; font-weight: 500;">/mes</span></div>
                        <p class="inc">1 canal Â· Web o Telegram</p>
                        <ul class="bul">
                            <li>Plantilla base de ventas</li>
                            <li>50 leads/mes</li>
                            <li>IntegraciÃ³n Google Sheets</li>
                            <li>Soporte por email</li>
                        </ul>
                        <a class="btn btn-ghost" href="#contacto">Empezar</a>
                    </div>
                    <div class="plan best loading animate-delay-2">
                        <div class="tag">Recomendado</div>
                        <div class="price">$99<span style="font-size: 18px; font-weight: 500;">/mes</span></div>
                        <p class="inc">2 canales Â· Web + WhatsApp</p>
                        <ul class="bul">
                            <li>Embudo con calificaciÃ³n de leads</li>
                            <li>IA con memoria breve</li>
                            <li>IntegraciÃ³n n8n + pagos</li>
                            <li>Dashboard de mÃ©tricas</li>
                            <li>Soporte prioritario</li>
                        </ul>
                        <a class="btn btn-primary" href="#contacto">Elegir Pro</a>
                    </div>
                    <div class="plan loading animate-delay-3">
                        <div class="tag">Empresas</div>
                        <div class="price">$199<span style="font-size: 18px; font-weight: 500;">/mes</span></div>
                        <p class="inc">Multicanal + SLA</p>
                        <ul class="bul">
                            <li>IA avanzada y reglas</li>
                            <li>Dashboards y reportes</li>
                            <li>MÃºltiples integraciones</li>
                            <li>Soporte 24/7</li>
                            <li>ConsultorÃ­a incluida</li>
                        </ul>
                        <a class="btn btn-ghost" href="#contacto">Hablar con ventas</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="block">
            <div class="wrap grid-2">
                <div class="card loading">
                    <h3>ð¬ Resultados reales</h3>
                    <p class="quote">"En 30 dÃ­as duplicamos las conversaciones calificadas y reducimos el tiempo de
                        respuesta a menos de 2 minutos. El ROI fue inmediato."</p>
                    <p class="author">MarÃ­a GonzÃ¡lez, Directora Comercial Â· TechCorp</p>
                </div>
                <div class="card loading animate-delay-1">
                    <h3>ð½ï¸ Caso de Ã©xito</h3>
                    <p>Restaurante con reservas automatizadas: +42% de mesas ocupadas entre semana. IntegraciÃ³n con
                        Sheets y recordatorios por WhatsApp. ReducciÃ³n del 80% en llamadas perdidas.</p>
                    <p class="author">Implementado en 15 dÃ­as</p>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="block">
            <div class="wrap">
                <h2 class="section-title loading">Preguntas frecuentes</h2>
                <details class="faq loading">
                    <summary>Â¿Necesito nÃºmero verificado de WhatsApp Business?</summary>
                    <div class="muted" style="margin-top: 12px;">
                        Recomendado para envÃ­os proactivos con plantilla. Para respuestas entrantes no es obligatorio.
                        Te ayudamos con la verificaciÃ³n.
                    </div>
                </details>
                <details class="faq loading">
                    <summary>Â¿Puedo conectar mi CRM actual?</summary>
                    <div class="muted" style="margin-top: 12px;">
                        SÃ­. Usamos n8n y APIs para sincronizar contactos, notas y etapas del embudo con HubSpot,
                        Salesforce, Pipedrive y mÃ¡s.
                    </div>
                </details>
                <details class="faq loading">
                    <summary>Â¿La IA es obligatoria o puedo usar solo flujos?</summary>
                    <div class="muted" style="margin-top: 12px;">
                        No es obligatoria. Podemos iniciar con guiones controlados y luego activar IA por secciones
                        segÃºn tu comodidad.
                    </div>
                </details>
                <details class="faq loading">
                    <summary>Â¿QuÃ© tan rÃ¡pido puedo ver resultados?</summary>
                    <div class="muted" style="margin-top: 12px;">
                        La mayorÃ­a de clientes ven mejoras en 7-15 dÃ­as. El setup completo toma entre 2-4 semanas
                        dependiendo de las integraciones.
                    </div>
                </details>
            </div>
        </section>

        <!-- Contact -->
        <section id="contacto" class="block contact">
            <div class="wrap grid-2">
                <div class="panel card loading">
                    <h3>ð¬ ContÃ¡ctanos</h3>
                    <p class="muted">CuÃ©ntanos sobre tu negocio y preparamos una demo personalizada en 24 horas.</p>
                    <div class="stack" style="margin-top: 24px;">
                        <input required placeholder="Nombre completo" id="nombre">
                        <input required type="email" placeholder="Correo electrÃ³nico" id="email">
                        <input placeholder="WhatsApp (opcional)" id="telefono">
                        <textarea
                            placeholder="Â¿QuÃ© objetivo quieres lograr con el chatbot? Â¿CuÃ¡ntos leads manejas mensualmente?"
                            id="mensaje"></textarea>
                        <button class="btn btn-accent" type="button" onclick="enviarFormulario()">
                            <span>ð</span> Solicitar demo gratuita
                        </button>
                    </div>
                </div>
                <div class="card loading animate-delay-1">
                    <h3>ð Contacto directo</h3>
                    <p><strong>WhatsApp:</strong> <a href="https://wa.me/525500000000">+52 55 0000 0000</a></p>
                    <p><strong>Email:</strong> <a href="mailto:hola@chapi.mx">hola@chapi.mx</a></p>
                    <p><strong>Horario:</strong> Lun-Vie 9:00 - 18:00 (GMT-6)</p>

                    <hr style="border: 1px solid rgba(255,255,255,0.1); margin: 24px 0;">

                    <h3>ð¯ Â¿QuÃ© incluye la demo?</h3>
                    <ul class="bul" style="font-size: 14px;">
                        <li>AnÃ¡lisis de tu proceso actual</li>
                        <li>Chatbot configurado para tu sector</li>
                        <li>Prueba en tu WhatsApp Business</li>
                        <li>Propuesta de integraciÃ³n personalizada</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="wrap cols">
                <div>
                    <div class="brand" style="margin-bottom: 16px;">CHAPI Â· Chatbots Inteligentes</div>
                    <p class="muted">AutomatizaciÃ³n inteligente para equipos de ventas modernos. MÃ¡s conversiones, menos
                        trabajo manual.</p>
                    <p style="font-size: 12px; margin-top: 20px;">Â© 2024 CHAPI. Todos los derechos reservados.</p>
                </div>
                <div>
                    <h4>Producto</h4>
                    <p><a href="#features">Funciones</a></p>
                    <p><a href="#pricing">Precios</a></p>
                    <p><a href="#demo">Demo</a></p>
                </div>
                <div>
                    <h4>Empresa</h4>
                    <p><a href="#contacto">Contacto</a></p>
                    <p><a href="#">Soporte</a></p>
                    <p><a href="#">Blog</a></p>
                </div>
            </div>
        </footer>

        <!-- WIDGET CHAPI PROFESIONAL - CALIFICACIÃN DE LEADS -->
        <div id="chapiProfessionalWidget">
            <button id="chapiFloatingBtn">
                ð¤
                <span class="pulse-indicator"></span>
            </button>

            <div id="chapiChatWindow">
                <div class="chat-header">
                    <h3>ð CHAPI Assistant</h3>
                    <button id="chapiCloseBtn">Ã</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="step-indicator" id="stepIndicator">Paso 1 de 12</span>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Los mensajes se agregan aquÃ­ dinÃ¡micamente -->
                </div>

                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="Escribe tu respuesta...">
                    <button id="sendBtn">Enviar</button>
                </div>
            </div>
        </div>

        <script>
            /* =================================
               CONFIGURACIÃN AVANZADA DEL WIDGET CHAPI
            ================================= */

            const CHAPI_ADVANCED_CONFIG = {
                // InformaciÃ³n de contacto
                whatsappNumber: '522228588674',
                email: 'jovany2224@gmail.com',
                companyName: 'CHAPI - Chatbots Inteligentes',

                // ConfiguraciÃ³n de planes por volumen de clientes
                plans: {
                    basico: {
                        name: 'Plan BÃ¡sico',
                        price: '6,000 MXN/mes',
                        clientRange: [0, 100],
                        features: ['1 canal', 'Respuestas bÃ¡sicas', 'WhatsApp o Web', 'Soporte email'],
                        developmentTime: '3-5 dÃ­as hÃ¡biles'
                    },
                    pro: {
                        name: 'Plan Pro',
                        price: '12,000 MXN/mes',
                        clientRange: [101, 500],
                        features: ['3 canales', 'IA avanzada', 'Integraciones CRM', 'Agendar citas', 'Soporte prioritario'],
                        developmentTime: '5-7 dÃ­as hÃ¡biles'
                    },
                    empresarial: {
                        name: 'Plan Empresarial',
                        price: '20,000 MXN/mes',
                        clientRange: [501, 999999],
                        features: ['Canales ilimitados', 'IA personalizada', 'Integraciones complejas', 'Reportes avanzados', 'Soporte 24/7'],
                        developmentTime: '1-2 semanas'
                    }
                },

                // Configuraciones especÃ­ficas por industria
                industries: {
                    restaurante: {
                        name: 'Restaurante',
                        emoji: 'ð½ï¸',
                        questions: [
                            'Â¿Quieres que tome pedidos completos o solo informe sobre el menÃº?',
                            'Â¿Manejas delivery, pickup o solo servicio en local?',
                            'Â¿Tienes sistema de pagos online o prefieres pagos al recibir?',
                            'Â¿Necesitas integraciÃ³n con apps como Uber Eats, Rappi?'
                        ],
                        features: ['Toma de pedidos', 'MenÃº digital', 'IntegraciÃ³n delivery', 'Horarios de atenciÃ³n'],
                        roi: 'Aumenta pedidos 35% y reduce llamadas perdidas 80%'
                    },
                    consultorio: {
                        name: 'Consultorio/MÃ©dico',
                        emoji: 'ð¥',
                        questions: [
                            'Â¿Para quÃ© tipo de especialidad mÃ©dica?',
                            'Â¿Quieres que agende citas directamente o solo informe horarios?',
                            'Â¿Necesitas recordatorios automÃ¡ticos de citas?',
                            'Â¿Manejas telemedicina o consultas virtuales?'
                        ],
                        features: ['Agendado de citas', 'Recordatorios automÃ¡ticos', 'InformaciÃ³n mÃ©dica', 'Historial de pacientes'],
                        roi: 'Reduce 60% las llamadas y mejora la puntualidad 40%'
                    },
                    tienda: {
                        name: 'Tienda Online',
                        emoji: 'ðï¸',
                        questions: [
                            'Â¿Vendes productos fÃ­sicos o digitales?',
                            'Â¿Ya tienes carrito de compras y sistema de pagos?',
                            'Â¿Necesitas integraciÃ³n con inventario en tiempo real?',
                            'Â¿Manejas envÃ­os a domicilio?'
                        ],
                        features: ['CatÃ¡logo productos', 'Proceso de compra', 'Estado de pedidos', 'Soporte postventa'],
                        roi: 'Incrementa conversiones 25% y mejora atenciÃ³n al cliente'
                    },
                    gimnasio: {
                        name: 'Gimnasio/Fitness',
                        emoji: 'ðª',
                        questions: [
                            'Â¿Ofreces clases grupales que requieran reserva?',
                            'Â¿Tienes membresÃ­as o planes de pago?',
                            'Â¿Necesitas integraciÃ³n con control de acceso?',
                            'Â¿Manejas entrenadores personales?'
                        ],
                        features: ['Reserva de clases', 'Planes y membresÃ­as', 'Horarios disponibles', 'Info nutricional'],
                        roi: 'Optimiza ocupaciÃ³n de clases 30% y reduce cancelaciones'
                    },
                    inmobiliaria: {
                        name: 'Inmobiliaria',
                        emoji: 'ð ',
                        questions: [
                            'Â¿Vendes o rentas propiedades?',
                            'Â¿Quieres que califique leads antes de transferir?',
                            'Â¿Necesitas agendar visitas a propiedades?',
                            'Â¿Manejas varios asesores o equipos de ventas?'
                        ],
                        features: ['CatÃ¡logo de propiedades', 'CalificaciÃ³n de leads', 'Agendado de visitas', 'Seguimiento de interesados'],
                        roi: 'Califica leads automÃ¡ticamente y aumenta citas efectivas 45%'
                    },
                    servicios: {
                        name: 'Servicios Profesionales',
                        emoji: 'ð¼',
                        questions: [
                            'Â¿QuÃ© tipo de servicios profesionales ofreces?',
                            'Â¿Necesitas agendar citas o consultas?',
                            'Â¿Manejas cotizaciones personalizadas?',
                            'Â¿Tienes diferentes tipos de servicios o paquetes?'
                        ],
                        features: ['InformaciÃ³n de servicios', 'Agendado de consultas', 'Cotizaciones', 'Seguimiento de proyectos'],
                        roi: 'Mejora proceso de cotizaciÃ³n y reduce tiempo de respuesta 70%'
                    }
                },

                // Flujo de conversaciÃ³n por pasos
                conversationFlow: {
                    welcome: {
                        message: `Â¡Hola! ð Soy tu asistente de CHAPI.<br><br>Te ayudo a crear el <strong>chatbot perfecto para tu negocio</strong>. Para diseÃ±ar algo que realmente funcione para ti, necesito conocer algunos detalles.<br><br><strong>Â¿Empezamos?</strong> Solo toma 3-4 minutos.`,
                        buttons: ['ð Â¡Perfecto, empecemos!', 'ð± Hablar por WhatsApp directamente']
                    },

                    businessType: {
                        message: `Â¡Excelente! Primero lo bÃ¡sico:<br><br><strong>Â¿Para quÃ© tipo de negocio necesitas el chatbot?</strong><br><br>Esto me ayuda a personalizar las preguntas siguientes.`,
                        buttons: ['ð½ï¸ Restaurante', 'ð¥ Consultorio/MÃ©dico', 'ðï¸ Tienda Online', 'ðª Gimnasio/Fitness', 'ð  Inmobiliaria', 'ð¼ Servicios Profesionales', 'â Otro tipo']
                    },

                    businessInfo: {
                        message: `Perfecto, un <strong>{businessType}</strong>. <br><br>Ahora cuÃ©ntame:<br><br><strong>â¢ Â¿CuÃ¡l es el nombre de tu empresa?</strong><br><strong>â¢ Â¿CuÃ¡ntos clientes aproximadamente atiendes al dÃ­a?</strong><br><br><em>Ejemplo: "PizzerÃ­a Mario, atendemos unos 50 clientes diarios"</em>`,
                        buttons: []
                    },

                    platform: {
                        message: `Entendido, <strong>{businessName}</strong>! ð<br><br><strong>Â¿En quÃ© plataforma quieres el chatbot principalmente?</strong><br><br>Puedes elegir varias despuÃ©s, pero empecemos por la principal.`,
                        buttons: ['ð± WhatsApp Business', 'ð Sitio Web', 'ð Facebook Messenger', 'ð· Instagram', 'âï¸ Telegram', 'ð Varias plataformas']
                    },

                    objectives: {
                        message: `Â¡{platform} es una excelente elecciÃ³n! ðª<br><br><strong>Â¿CuÃ¡l es el objetivo principal del chatbot?</strong><br><br>Selecciona lo mÃ¡s importante para tu negocio:`,
                        buttons: ['â Responder preguntas frecuentes', 'ð Agendar citas/reservas', 'ð Tomar pedidos/ventas', 'ð Capturar leads', 'ð¯ Soporte tÃ©cnico', 'ð MÃºltiples objetivos']
                    },

                    schedule: {
                        message: `Perfecto! Ahora sobre disponibilidad:<br><br><strong>Â¿En quÃ© horarios debe estar activo el chatbot?</strong>`,
                        buttons: ['ð 24/7 (siempre activo)', 'ð¢ Horario comercial solamente', 'ð Lunes a viernes', 'â° Horario personalizado']
                    },

                    integrations: {
                        message: `Excelente! Una pregunta tÃ©cnica importante:<br><br><strong>Â¿Usas algÃºn sistema que debamos conectar?</strong><br><br><em>(CRM, calendario, inventario, pagos, etc.)</em>`,
                        buttons: ['ð SÃ­, uso CRM (HubSpot, Salesforce, etc.)', 'ð Sistema de citas/calendario', 'ð³ Pasarela de pagos', 'ð¦ Control de inventario', 'â No uso ningÃºn sistema', 'ð¤ No estoy seguro/a']
                    },

                    budget: {
                        message: `Â¡Ya casi terminamos! ð¯<br><br>Para darte la mejor recomendaciÃ³n:<br><br><strong>Â¿CuÃ¡l es tu presupuesto aproximado mensual?</strong><br><br><em>Incluye desarrollo, mantenimiento y soporte.</em>`,
                        buttons: ['ð° $3,000 - $8,000 MXN', 'ð¼ $8,000 - $15,000 MXN', 'ð $15,000 - $25,000 MXN', 'ð MÃ¡s de $25,000 MXN', 'â Prefiero ver opciones']
                    },

                    timing: {
                        message: `Â¡Perfecto! Ãltima pregunta:<br><br><strong>Â¿CuÃ¡ndo necesitas que estÃ© funcionando el chatbot?</strong>`,
                        buttons: ['â¡ Lo antes posible (urgente)', 'ð En 1-2 semanas', 'ðï¸ En el prÃ³ximo mes', 'â³ No tengo prisa']
                    },

                    recommendation: {
                        // Se genera dinÃ¡micamente
                        buttons: ['â Â¡Me interesa! Quiero la propuesta', 'ð± Hablar por WhatsApp', 'ð° Ver otros planes', 'ð Cambiar alguna respuesta']
                    },

                    contact: {
                        message: `Â¡Excelente decisiÃ³n! ð<br><br>Para enviarte la <strong>propuesta personalizada completa</strong>:<br><br><strong>Â¿CuÃ¡l es tu WhatsApp o email preferido?</strong><br><br><em>Te contactarÃ© en las prÃ³ximas 2 horas con:</em><br>â¢ CotizaciÃ³n detallada<br>â¢ Ejemplos del chatbot funcionando<br>â¢ Cronograma de implementaciÃ³n`,
                        buttons: []
                    },

                    confirmation: {
                        // Se genera dinÃ¡micamente
                        buttons: ['ð± WhatsApp urgente', 'ð§ Confirmar por email', 'ð Empezar nueva consulta']
                    }
                },

                // Respuestas preparadas para preguntas frecuentes
                faqResponses: {
                    pricing: "Los precios varÃ­an segÃºn funcionalidades. DespuÃ©s de conocer tu proyecto, te envÃ­o cotizaciÃ³n personalizada.",
                    development: "Chatbot bÃ¡sico: 3-5 dÃ­as. Complejo con integraciones: 1-2 semanas.",
                    platforms: "Trabajamos con WhatsApp Business API, web, Facebook, Instagram, Telegram.",
                    maintenance: "Incluye actualizaciones de contenido, soporte tÃ©cnico y ajustes menores."
                }
            };

            /* =================================
               LÃGICA DEL WIDGET
            ================================= */

            class ChapiAdvancedLeadWidget {
                constructor() {
                    this.currentStep = 0;
                    this.isOpen = false;
                    this.leadData = {};
                    this.selectedIndustry = null;
                    // Definir flujo con base en la config
                    this.stepNames = ['welcome', 'businessType', 'businessInfo', 'platform', 'objectives', 'schedule', 'integrations', 'budget', 'timing', 'recommendation', 'contact', 'confirmation'];
                    this.initializeElements();
                    this.bindEvents();
                }

                initializeElements() {
                    this.floatingBtn = document.getElementById('chapiFloatingBtn');
                    this.chatWindow = document.getElementById('chapiChatWindow');
                    this.closeBtn = document.getElementById('chapiCloseBtn');
                    this.messagesContainer = document.getElementById('chatMessages');
                    this.input = document.getElementById('chatInput');
                    this.sendBtn = document.getElementById('sendBtn');
                    this.progressFill = document.getElementById('progressFill');
                    this.stepIndicator = document.getElementById('stepIndicator');
                }

                bindEvents() {
                    this.floatingBtn.addEventListener('click', () => this.toggleChat());
                    this.closeBtn.addEventListener('click', () => this.closeChat());
                    this.sendBtn.addEventListener('click', () => this.sendMessage());
                    this.input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') this.sendMessage();
                    });
                }

                toggleChat() { this.isOpen ? this.closeChat() : this.openChat(); }

                openChat() {
                    this.isOpen = true;
                    this.chatWindow.style.display = 'flex';
                    this.floatingBtn.innerHTML = 'Ã';
                    if (this.messagesContainer.children.length === 0) {
                        this.startConversation();
                    }
                    this.input.focus();
                }

                closeChat() {
                    this.isOpen = false;
                    this.chatWindow.style.display = 'none';
                    this.floatingBtn.innerHTML = 'ð¤';
                }

                startConversation() {
                    this.currentStep = 0;
                    this.leadData = {};
                    this.messagesContainer.innerHTML = '';
                    this.executeCurrentStep();
                }

                updateProgress() {
                    const total = this.stepNames.length;
                    const progress = ((this.currentStep + 1) / total) * 100;
                    this.progressFill.style.width = `${progress}%`;
                    this.stepIndicator.textContent = `Paso ${this.currentStep + 1} de ${total}`;
                }

                async executeCurrentStep() {
                    this.updateProgress();
                    const stepName = this.stepNames[this.currentStep];
                    const F = CHAPI_ADVANCED_CONFIG.conversationFlow;

                    if (stepName === 'welcome') {
                        await this.addBotMessage(F.welcome.message, F.welcome.buttons);
                        return;
                    }

                    if (stepName === 'businessType') {
                        await this.addBotMessage(F.businessType.message, F.businessType.buttons);
                        return;
                    }

                    if (stepName === 'businessInfo') {
                        const msg = F.businessInfo.message
                            .replace('{businessType}', this.leadData.businessType || 'tu negocio');
                        await this.addBotMessage(msg, F.businessInfo.buttons);
                        return;
                    }

                    if (stepName === 'platform') {
                        const name = this.leadData.businessName || 'tu empresa';
                        const msg = F.platform.message.replace('{businessName}', name);
                        await this.addBotMessage(msg, F.platform.buttons);
                        return;
                    }

                    if (stepName === 'objectives') {
                        const msg = F.objectives.message.replace('{platform}', this.leadData.platform || 'tu plataforma');
                        await this.addBotMessage(msg, F.objectives.buttons);
                        return;
                    }

                    if (stepName === 'schedule') {
                        await this.addBotMessage(F.schedule.message, F.schedule.buttons);
                        return;
                    }

                    if (stepName === 'integrations') {
                        await this.addBotMessage(F.integrations.message, F.integrations.buttons);
                        return;
                    }

                    if (stepName === 'budget') {
                        await this.addBotMessage(F.budget.message, F.budget.buttons);
                        return;
                    }

                    if (stepName === 'timing') {
                        await this.addBotMessage(F.timing.message, F.timing.buttons);
                        return;
                    }

                    if (stepName === 'recommendation') {
                        await this.showRecommendationStep();
                        return;
                    }

                    if (stepName === 'contact') {
                        await this.addBotMessage(F.contact.message, F.contact.buttons);
                        return;
                    }

                    if (stepName === 'confirmation') {
                        await this.showConfirmationStep();
                        return;
                    }
                }

                async addBotMessage(message, showButtons = []) {
                    this.showTypingIndicator();
                    await this.delay(800 + Math.random() * 600);
                    this.removeTypingIndicator();
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message bot-message';
                    messageDiv.innerHTML = message;
                    this.messagesContainer.appendChild(messageDiv);
                    if (showButtons && showButtons.length) this.addQuickButtons(showButtons);
                    this.scrollToBottom();
                }

                addUserMessage(message) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message user-message';
                    messageDiv.textContent = message;
                    this.messagesContainer.appendChild(messageDiv);
                    this.scrollToBottom();
                }

                showTypingIndicator() {
                    const typingDiv = document.createElement('div');
                    typingDiv.id = 'typingIndicator';
                    typingDiv.className = 'typing-indicator';
                    typingDiv.innerHTML = `CHAPI estÃ¡ escribiendo<div class="typing-dots"><span></span><span></span><span></span></div>`;
                    this.messagesContainer.appendChild(typingDiv);
                    this.scrollToBottom();
                }

                removeTypingIndicator() {
                    const typing = document.getElementById('typingIndicator');
                    if (typing) typing.remove();
                }

                addQuickButtons(buttons) {
                    const buttonsContainer = document.createElement('div');
                    buttonsContainer.className = 'quick-buttons';
                    buttons.forEach(text => {
                        const btn = document.createElement('button');
                        btn.className = 'quick-btn';
                        btn.textContent = text;
                        btn.addEventListener('click', () => { this.input.value = text; this.sendMessage(); });
                        buttonsContainer.appendChild(btn);
                    });
                    this.messagesContainer.appendChild(buttonsContainer);
                    this.scrollToBottom();
                }

                sendMessage() {
                    const message = this.input.value.trim();
                    if (!message) return;
                    this.addUserMessage(message);
                    this.input.value = '';
                    this.processUserResponse(message);
                }

                processUserResponse(response) {
                    const stepName = this.stepNames[this.currentStep];
                    const lower = response.toLowerCase();

                    // Atajo a WhatsApp directo en cualquier momento
                    if (lower.includes('whatsapp')) {
                        // Si viene desde el botÃ³n de hablar directo
                        if (lower.includes('direct')) {
                            window.open(`https://wa.me/${CHAPI_ADVANCED_CONFIG.whatsappNumber}?text=Hola, vengo del asistente de la web.`, '_blank');
                            return;
                        }
                    }

                    switch (stepName) {
                        case 'welcome': {
                            if (lower.includes('whatsapp')) {
                                window.open(`https://wa.me/${CHAPI_ADVANCED_CONFIG.whatsappNumber}?text=Hola, vengo del asistente de la web.`, '_blank');
                                return;
                            }
                            break;
                        }
                        case 'businessType': {
                            // Mapear a una clave de industria conocida si es botÃ³n
                            const map = {
                                'restaurante': 'restaurante',
                                'consultorio': 'consultorio',
                                'mÃ©dico': 'consultorio',
                                'tienda': 'tienda',
                                'gimnasio': 'gimnasio',
                                'fitness': 'gimnasio',
                                'inmobiliaria': 'inmobiliaria',
                                'servicios': 'servicios'
                            };
                            let key = Object.keys(map).find(k => lower.includes(k));
                            this.leadData.businessType = key ? CHAPI_ADVANCED_CONFIG.industries[map[key]].name : response;
                            this.selectedIndustry = key ? map[key] : null;

                            // Si hay industria reconocida, enviar preguntas especÃ­ficas como mensaje extra
                            if (this.selectedIndustry) {
                                const ind = CHAPI_ADVANCED_CONFIG.industries[this.selectedIndustry];
                                const q = ind.questions.map((qq, i) => `â¢ ${qq}`).join('<br>');
                                this.addBotMessage(`${ind.emoji} Algunas preguntas para ajustar aÃºn mÃ¡s:<br><br>${q}`);
                            }
                            break;
                        }
                        case 'businessInfo': {
                            // Extraer nombre y clientes por dÃ­a aproximados
                            const nums = response.match(/\d+/g);
                            const clients = nums ? parseInt(nums[0]) : undefined;
                            this.leadData.businessName = response.split(',')[0].trim();
                            this.leadData.clientsPerDay = clients;
                            break;
                        }
                        case 'platform': {
                            this.leadData.platform = response;
                            break;
                        }
                        case 'objectives': {
                            this.leadData.objectives = response;
                            break;
                        }
                        case 'schedule': {
                            this.leadData.schedule = response;
                            break;
                        }
                        case 'integrations': {
                            this.leadData.integrations = response;
                            break;
                        }
                        case 'budget': {
                            this.leadData.budget = response;
                            break;
                        }
                        case 'timing': {
                            this.leadData.timing = response;
                            break;
                        }
                        case 'recommendation': {
                            if (lower.includes('whatsapp')) {
                                window.open(`https://wa.me/${CHAPI_ADVANCED_CONFIG.whatsappNumber}?text=Hola, quiero avanzar con la propuesta`, '_blank');
                                return;
                            }
                            break;
                        }
                        case 'contact': {
                            this.leadData.contact = response;
                            break;
                        }
                        case 'confirmation': {
                            if (lower.includes('urgente')) {
                                window.open(`https://wa.me/${CHAPI_ADVANCED_CONFIG.whatsappNumber}?text=URGENTE: ${this.leadData.businessName} - ${this.leadData.contact}`, '_blank');
                                return;
                            }
                            if (lower.includes('nueva')) {
                                this.startConversation();
                                return;
                            }
                            break;
                        }
                    }

                    // Siguiente paso
                    this.currentStep++;
                    if (this.currentStep < this.stepNames.length) {
                        setTimeout(() => this.executeCurrentStep(), 400);
                    }
                }

                getRecommendedPlan() {
                    const clients = this.leadData.clientsPerDay || 50;
                    const plans = CHAPI_ADVANCED_CONFIG.plans;
                    const pick = (p) => ({ key: p[0], ...p[1] });
                    const entries = Object.entries(plans).map(pick);
                    const match = entries.find(pl => clients >= pl.clientRange[0] && clients <= pl.clientRange[1]) || entries[1];
                    return match;
                }

                async showRecommendationStep() {
                    const plan = this.getRecommendedPlan();
                    const ind = this.selectedIndustry ? CHAPI_ADVANCED_CONFIG.industries[this.selectedIndustry] : null;
                    const name = this.leadData.businessName || 'tu empresa';
                    const clients = this.leadData.clientsPerDay ? `~${this.leadData.clientsPerDay} clientes/dÃ­a` : 'volumen no especificado';
                    const features = plan.features.map(f => `â¢ ${f}`).join('<br>');
                    const extra = ind ? `${ind.emoji} En tu sector (${ind.name}): ${ind.roi}` : '';

                    const msg = `
                    <strong>RecomendaciÃ³n personalizada ð¯</strong><br><br>
                    ð¢ <strong>Negocio:</strong> ${name}<br>
                    ð <strong>Volumen:</strong> ${clients}<br>
                    ð§© <strong>Objetivo:</strong> ${this.leadData.objectives || 'no especificado'}<br>
                    ð <strong>Integraciones:</strong> ${this.leadData.integrations || 'ninguna'}<br><br>
                    ð¼ <strong>Plan sugerido:</strong> ${plan.name}<br>
                    ð° <strong>InversiÃ³n:</strong> ${plan.price}<br>
                    ðï¸ <strong>Tiempo de implementaciÃ³n:</strong> ${plan.developmentTime}<br><br>
                    â <strong>Incluye:</strong><br>${features}<br><br>
                    ${extra}
                `;
                    await this.addBotMessage(msg, CHAPI_ADVANCED_CONFIG.conversationFlow.recommendation.buttons);
                }

                async showConfirmationStep() {
                    const plan = this.getRecommendedPlan();
                    const name = this.leadData.businessName || 'tu empresa';
                    const msg = `
                    <strong>Â¡Listo! â</strong><br><br>
                    Resumen:<br>
                    â¢ Negocio: ${name}<br>
                    â¢ Plan: ${plan.name}<br>
                    â¢ Plataforma: ${this.leadData.platform || 'no especificada'}<br>
                    â¢ Contacto: ${this.leadData.contact || 'pendiente'}<br><br>
                    Te contactaremos en <strong>mÃ¡ximo 2 horas</strong> con la propuesta detallada.
                `;
                    await this.addBotMessage(msg, CHAPI_ADVANCED_CONFIG.conversationFlow.confirmation.buttons);
                    this.sendLeadData();
                }

                sendLeadData() {
                    const payload = {
                        timestamp: new Date().toISOString(),
                        businessType: this.leadData.businessType,
                        businessName: this.leadData.businessName,
                        clientsPerDay: this.leadData.clientsPerDay,
                        platform: this.leadData.platform,
                        objectives: this.leadData.objectives,
                        schedule: this.leadData.schedule,
                        integrations: this.leadData.integrations,
                        budget: this.leadData.budget,
                        timing: this.leadData.timing,
                        recommendedPlan: this.getRecommendedPlan().name,
                        contact: this.leadData.contact,
                        source: 'chapi_widget_advanced'
                    };
                    console.log('ð Lead capturado (avanzado):', payload);
                    // Hook de integraciÃ³n (API/Sheets/Email)
                    // this.sendToAPI(payload);
                }

                scrollToBottom() {
                    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
                }

                delay(ms) { return new Promise(r => setTimeout(r, ms)); }
            }

            /* =================================
               FUNCIONES ORIGINALES DE LA PÃGINA
            ================================= */

            // Scroll indicator
            function updateScrollIndicator() {
                const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                document.getElementById('scrollIndicator').style.width = scrolled + '%';
            }

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Enhanced form submission
            function enviarFormulario() {
                const nombre = document.getElementById('nombre').value;
                const email = document.getElementById('email').value;
                const telefono = document.getElementById('telefono').value;
                const mensaje = document.getElementById('mensaje').value;

                if (!nombre || !email) {
                    alert('Por favor completa nombre y correo electrÃ³nico.');
                    return;
                }

                // Simulate sending
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '<span>â³</span> Enviando...';
                btn.disabled = true;

                setTimeout(() => {
                    alert(`Â¡Gracias ${nombre}! Te contactaremos en las prÃ³ximas 24 horas para agendar tu demo personalizada.`);
                    btn.innerHTML = '<span>â</span> Â¡Mensaje enviado!';

                    // Reset form
                    setTimeout(() => {
                        document.getElementById('nombre').value = '';
                        document.getElementById('email').value = '';
                        document.getElementById('telefono').value = '';
                        document.getElementById('mensaje').value = '';
                        btn.innerHTML = originalText;
                        btn.disabled = false;
                    }, 3000);
                }, 2000);
            }

            // Mobile menu (basic implementation)
            document.getElementById('mobileMenuBtn').addEventListener('click', function () {
                const menu = document.getElementById('navMenu');
                menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
            });

            // Animation on scroll
            function animateOnScroll() {
                const elements = document.querySelectorAll('.loading');
                elements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;

                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('animate-fadeInUp');
                        element.classList.remove('loading');
                    }
                });
            }

            // Event listeners
            window.addEventListener('scroll', () => {
                updateScrollIndicator();
                animateOnScroll();
            });

            // Enhanced button interactions
            document.querySelectorAll('.btn').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    // Add ripple effect
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
                    ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
                    ripple.style.position = 'absolute';
                    ripple.style.borderRadius = '50%';
                    ripple.style.background = 'rgba(255,255,255,0.2)';
                    ripple.style.transform = 'scale(0)';
                    ripple.style.animation = 'ripple 0.6s linear';
                    ripple.style.pointerEvents = 'none';

                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);

                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });

            // Add ripple animation
            const style = document.createElement('style');
            style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
            document.head.appendChild(style);

            /* =================================
               INICIALIZACIÃN
            ================================= */

            // Initial load
            document.addEventListener('DOMContentLoaded', function () {
                animateOnScroll();
                updateScrollIndicator();

                // Inicializar el widget CHAPI
                const chapiWidget = new ChapiAdvancedLeadWidget();
                console.log('ð CHAPI Lead Widget inicializado');

                // Add interactive features to cards
                document.querySelectorAll('.card').forEach(card => {
                    card.addEventListener('mouseenter', function () {
                        this.style.transform = 'translateY(-8px) scale(1.02)';
                    });

                    card.addEventListener('mouseleave', function () {
                        this.style.transform = 'translateY(0) scale(1)';
                    });
                });
            });
        </script>
    </body>

</html>
