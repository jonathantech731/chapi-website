<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CHAPI Â· Chatbots Inteligentes</title>

        <style>
            :root {
                --bg: #0a0d14;
                --bg-soft: #111722;
                --panel: #161c27;
                --glass: rgba(22, 28, 39, 0.8);
                --text: #e8eef8;
                --muted: #a9b3c4;
                --brand: #2f7afe;
                --brand-light: #4a8bff;
                --accent: #00d4a6;
                --accent-light: #1ae6b8;
                --warn: #ffb020;
                --success: #10b981;
                --radius: 16px;
                --shadow: 0 20px 40px rgba(0, 0, 0, .4);
                --shadow-soft: 0 10px 30px rgba(0, 0, 0, .2);
                --max: 1200px;
                --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            * {
                box-sizing: border-box;
            }

            html {
                scroll-behavior: smooth;
            }

            body {
                margin: 0;
                background: var(--bg);
                color: var(--text);
                font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Helvetica, Arial, sans-serif;
                line-height: 1.6;
                overflow-x: hidden;
            }

            /* Animated background */
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background:
                    radial-gradient(circle at 20% 80%, rgba(47, 122, 254, 0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(0, 212, 166, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(47, 122, 254, 0.08) 0%, transparent 50%);
                z-index: -1;
                animation: backgroundFloat 20s ease-in-out infinite;
            }

            @keyframes backgroundFloat {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-20px); }
            }

            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(40px); }
                to { opacity: 1; transform: translateY(0); }
            }

            @keyframes scaleIn {
                from { opacity: 0; transform: scale(0.9); }
                to { opacity: 1; transform: scale(1); }
            }

            .animate-fadeInUp { animation: fadeInUp 0.8s ease-out forwards; }
            .animate-scaleIn { animation: scaleIn 0.6s ease-out forwards; }
            .animate-delay-1 { animation-delay: 0.1s; }
            .animate-delay-2 { animation-delay: 0.2s; }
            .animate-delay-3 { animation-delay: 0.3s; }

            /* Typography */
            h1, h2, h3 {
                font-weight: 700;
                letter-spacing: -0.025em;
            }

            a {
                color: var(--brand);
                text-decoration: none;
                transition: var(--transition);
            }

            .wrap {
                max-width: var(--max);
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Enhanced Buttons */
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 16px 24px;
                border-radius: 12px;
                font-weight: 600;
                font-size: 15px;
                border: 1px solid transparent;
                cursor: pointer;
                transition: var(--transition);
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.5s;
            }

            .btn:hover::before { left: 100%; }

            .btn-primary {
                background: linear-gradient(135deg, var(--brand), var(--brand-light));
                color: #fff;
                box-shadow: 0 8px 20px rgba(47, 122, 254, 0.3);
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 30px rgba(47, 122, 254, 0.4);
            }

            .btn-ghost {
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: var(--text);
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
            }

            .btn-ghost:hover {
                background: rgba(255, 255, 255, 0.1);
                border-color: rgba(255, 255, 255, 0.2);
                transform: translateY(-1px);
            }

            .btn-accent {
                background: linear-gradient(135deg, var(--accent), var(--accent-light));
                color: #001a14;
                box-shadow: 0 8px 20px rgba(0, 212, 166, 0.3);
            }

            .btn-accent:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 30px rgba(0, 212, 166, 0.4);
            }

            .tag {
                display: inline-block;
                padding: 8px 12px;
                border-radius: 999px;
                background: rgba(47, 122, 254, 0.15);
                color: #bcd4ff;
                border: 1px solid rgba(47, 122, 254, 0.3);
                font-size: 12px;
                font-weight: 500;
                letter-spacing: 0.5px;
                backdrop-filter: blur(10px);
            }

            /* Header */
            header {
                position: sticky;
                top: 0;
                background: rgba(12, 15, 20, 0.9);
                backdrop-filter: blur(20px);
                z-index: 50;
                border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                transition: var(--transition);
            }

            .nav {
                display: flex;
                align-items: center;
                justify-content: space-between;
                height: 70px;
            }

            .nav .left {
                display: flex;
                gap: 16px;
                align-items: center;
            }

            .nav .brand {
                font-weight: 800;
                font-size: 20px;
                letter-spacing: 0.5px;
                background: linear-gradient(135deg, var(--brand), var(--accent));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .nav ul {
                list-style: none;
                margin: 0;
                padding: 0;
                display: flex;
                gap: 24px;
            }

            .nav li a {
                color: var(--muted);
                padding: 10px 16px;
                border-radius: 10px;
                font-weight: 500;
                transition: var(--transition);
            }

            .nav li a:hover {
                background: rgba(255, 255, 255, 0.08);
                color: var(--text);
                transform: translateY(-1px);
            }

            /* Hero Section */
            .hero {
                padding: 100px 0 60px;
                position: relative;
                overflow: hidden;
            }

            .hero .grid {
                display: grid;
                grid-template-columns: 1.2fr 0.8fr;
                gap: 50px;
                align-items: center;
            }

            .hero h1 {
                font-size: clamp(32px, 5vw, 52px);
                line-height: 1.1;
                margin: 20px 0 16px;
                background: linear-gradient(135deg, var(--text), #a3b3d1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .hero p.lead {
                color: var(--muted);
                font-size: 19px;
                margin: 0 0 28px;
                line-height: 1.7;
            }

            .hero .panel {
                background: var(--glass);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                overflow: hidden;
                backdrop-filter: blur(20px);
                position: relative;
            }

            .hero .panel::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            }

            .hero img, .hero video {
                width: 100%;
                display: block;
                transition: var(--transition);
            }

            .hero .panel:hover img,
            .hero .panel:hover video {
                transform: scale(1.05);
            }

            /* Responsive Design */
            @media (max-width: 1024px) {
                .hero .grid {
                    grid-template-columns: 1fr;
                    gap: 40px;
                    text-align: center;
                }
            }

            @media (max-width: 768px) {
                .nav ul { display: none; }
                .hero { padding: 60px 0 40px; }
                .hero h1 { font-size: 28px; }
            }

            /* Loading Animation */
            .loading {
                opacity: 0;
                animation: fadeInUp 0.8s ease-out 0.1s forwards;
            }

            /* CHAPI Assistant Styles - Optimized */
            .chapi-assistant {
                position: fixed !important;
                bottom: 20px !important;
                right: 20px !important;
                z-index: 999999 !important;
                font-family: system-ui, -apple-system, sans-serif !important;
            }

            .chapi-chat-button {
                width: 64px !important;
                height: 64px !important;
                border-radius: 50% !important;
                background: linear-gradient(135deg, #2f7afe, #00d4a6) !important;
                border: none !important;
                cursor: pointer !important;
                color: white !important;
                font-size: 24px !important;
                box-shadow: 0 8px 20px rgba(47, 122, 254, 0.3) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                transition: all 0.3s ease !important;
                position: relative !important;
            }

            .chapi-chat-button:hover {
                transform: translateY(-2px) !important;
                box-shadow: 0 12px 30px rgba(47, 122, 254, 0.4) !important;
            }

            .chapi-chat-button::after {
                content: '' !important;
                position: absolute !important;
                top: -2px !important;
                right: -2px !important;
                width: 12px !important;
                height: 12px !important;
                background: #00d4a6 !important;
                border-radius: 50% !important;
                border: 2px solid #161c27 !important;
                animation: pulse 2s infinite !important;
            }

            @keyframes pulse {
                0% { transform: scale(1); opacity: 1; }
                50% { transform: scale(1.1); opacity: 0.7; }
                100% { transform: scale(1); opacity: 1; }
            }

            .chapi-chat-window {
                position: absolute !important;
                bottom: 80px !important;
                right: 0 !important;
                width: 350px !important;
                height: 450px !important;
                background: #161c27 !important;
                border-radius: 16px !important;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4) !important;
                border: 1px solid rgba(255, 255, 255, 0.1) !important;
                display: none !important;
                flex-direction: column !important;
                overflow: hidden !important;
            }

            .chapi-chat-window.open {
                display: flex !important;
            }

            .chapi-chat-header {
                padding: 16px !important;
                background: linear-gradient(135deg, #2f7afe, #00d4a6) !important;
                color: white !important;
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
            }

            .chapi-chat-header h3 {
                margin: 0 !important;
                font-size: 16px !important;
            }

            .chapi-close-btn {
                background: none !important;
                border: none !important;
                color: white !important;
                font-size: 20px !important;
                cursor: pointer !important;
                width: 24px !important;
                height: 24px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .chapi-chat-body {
                flex: 1 !important;
                padding: 16px !important;
                overflow-y: auto !important;
                color: #e8eef8 !important;
            }

            .chapi-message {
                margin-bottom: 12px !important;
                padding: 10px 12px !important;
                border-radius: 12px !important;
                background: rgba(47, 122, 254, 0.1) !important;
                border: 1px solid rgba(47, 122, 254, 0.2) !important;
                line-height: 1.4 !important;
                animation: fadeInMessage 0.3s ease-out !important;
            }

            @keyframes fadeInMessage {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }

            .chapi-message.user {
                background: rgba(0, 212, 166, 0.1) !important;
                border: 1px solid rgba(0, 212, 166, 0.2) !important;
                margin-left: 40px !important;
                text-align: right !important;
            }

            .chapi-message a {
                color: #00d4a6 !important;
                text-decoration: none !important;
                font-weight: 500 !important;
            }

            .chapi-message a:hover {
                color: #1ae6b8 !important;
                text-decoration: underline !important;
            }

            .chapi-quick-actions {
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 8px !important;
                margin: 12px 0 8px 0 !important;
            }

            .chapi-quick-action-btn {
                padding: 6px 12px !important;
                border: 1px solid rgba(47, 122, 254, 0.3) !important;
                border-radius: 16px !important;
                background: rgba(47, 122, 254, 0.1) !important;
                color: #4a8bff !important;
                font-size: 12px !important;
                cursor: pointer !important;
                transition: all 0.3s ease !important;
                white-space: nowrap !important;
            }

            .chapi-quick-action-btn:hover {
                background: rgba(47, 122, 254, 0.2) !important;
                transform: translateY(-1px) !important;
            }

            .chapi-chat-input {
                padding: 16px !important;
                border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
                display: flex !important;
                gap: 8px !important;
            }

            .chapi-input {
                flex: 1 !important;
                padding: 10px 12px !important;
                border: 1px solid rgba(255, 255, 255, 0.1) !important;
                border-radius: 8px !important;
                background: rgba(255, 255, 255, 0.05) !important;
                color: #e8eef8 !important;
                font-family: inherit !important;
                transition: all 0.3s ease !important;
            }

            .chapi-input:focus {
                outline: none !important;
                border-color: #2f7afe !important;
                background: rgba(255, 255, 255, 0.08) !important;
                box-shadow: 0 0 0 2px rgba(47, 122, 254, 0.1) !important;
            }

            .chapi-input::placeholder {
                color: #a9b3c4 !important;
                opacity: 0.7 !important;
            }

            .chapi-send-btn {
                padding: 10px 16px !important;
                background: linear-gradient(135deg, #2f7afe, #00d4a6) !important;
                border: none !important;
                border-radius: 8px !important;
                color: white !important;
                cursor: pointer !important;
                font-weight: 500 !important;
                transition: all 0.3s ease !important;
            }

            .chapi-send-btn:hover {
                transform: translateY(-1px) !important;
                box-shadow: 0 4px 12px rgba(47, 122, 254, 0.3) !important;
            }

            @media (max-width: 480px) {
                .chapi-chat-window {
                    width: 300px !important;
                    height: 400px !important;
                }
            }
        </style>
    </head>

    <body>
        <header>
            <div class="wrap nav">
                <div class="left">
                    <div class="brand">CHAPI Â· Chatbots Inteligentes</div>
                    <span class="tag">Ventas Â· Soporte Â· AutomatizaciÃ³n</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#features">Funciones</a></li>
                        <li><a href="#pricing">Planes</a></li>
                        <li><a href="#demo">Demo</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Hero -->
        <section class="hero">
            <div class="wrap grid">
                <div class="loading">
                    <h1>Chatbots de ventas que cierran oportunidades 24/7</h1>
                    <p class="lead">ImplementaciÃ³n profesional en WhatsApp, Telegram y Web. Integramos tu negocio con automatizaciones reales (n8n, CRMs, pago), sin depender de la nube si lo necesitas.</p>
                    <div style="display:flex;gap:16px;flex-wrap:wrap;margin:32px 0;">
                        <a href="#demo" class="btn btn-primary">
                            <span>ð</span> Probar demo
                        </a>
                        <a href="#pricing" class="btn btn-ghost">Ver planes</a>
                        <a href="#contacto" class="btn btn-accent">Cotizar proyecto</a>
                    </div>
                    <div style="color: var(--muted); margin-top: 20px;">
                        <strong>Conectado con:</strong> Stripe Â· MercadoPago Â· Gmail Â· Google Sheets Â· APIs propias
                    </div>
                </div>
                <div class="panel loading animate-delay-2">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23161c27'/%3E%3Cstop offset='100%25' style='stop-color:%230f141d'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bg)'/%3E%3Ccircle cx='400' cy='300' r='100' fill='%232f7afe' opacity='0.3'/%3E%3Ctext x='400' y='300' text-anchor='middle' fill='%23e8eef8' font-size='24' font-family='system-ui'%3EChatbot Demo%3C/text%3E%3Ctext x='400' y='330' text-anchor='middle' fill='%23a9b3c4' font-size='14'%3EPreview de CHAPI%3C/text%3E%3C/svg%3E" alt="Demo chatbot CHAPI">
                </div>
            </div>
        </section>

        <!-- CHAPI Assistant Widget -->
        <div class="chapi-assistant" id="chapiAssistant">
            <button class="chapi-chat-button" id="chapiChatButton">ð¬</button>
            <div class="chapi-chat-window" id="chapiChatWindow">
                <div class="chapi-chat-header">
                    <h3>ð¤ CHAPI Assistant</h3>
                    <button class="chapi-close-btn" id="chapiCloseBtn">Ã</button>
                </div>
                <div class="chapi-chat-body" id="chapiChatBody">
                    <div class="chapi-message">
                        Â¡Hola! ð Soy <strong>CHAPI</strong>, tu asistente virtual especializado en chatbots inteligentes.
                        <br><br>
                        Estoy aquÃ­ para ayudarte a:
                        <br>â¢ ð Crear flujos de ventas automÃ¡ticos
                        <br>â¢ ð° Conocer nuestros planes y precios
                        <br>â¢ ð± Probar demos en vivo
                        <br>â¢ ð Conectarte con nuestro equipo
                        <br><br>
                        Â¿En quÃ© puedo ayudarte hoy?
                    </div>
                </div>
                <div class="chapi-chat-input">
                    <input type="text" class="chapi-input" id="chapiInput" placeholder="Escribe tu mensaje...">
                    <button class="chapi-send-btn" id="chapiSendBtn">Enviar</button>
                </div>
            </div>
        </div>

        <script>
            // CHAPI Assistant Configuration - Optimized
            const CHAPI_CONFIG = {
                responses: {
                    'precio|costo|plan|cuanto': {
                        text: `ð° <strong>Nuestros planes 2025:</strong>
                        <br><br>
                        ð¥ <strong>BÃSICO - $49 USD/mes</strong>
                        <br>â¢ 1 canal (Web o Telegram)
                        <br>â¢ Plantilla base de ventas
                        <br>â¢ 50 leads/mes
                        <br>â¢ IntegraciÃ³n Google Sheets
                        <br>â¢ Soporte por email
                        <br><br>
                        ð¥ <strong>PRO - $99 USD/mes</strong> â­ MÃ¡s popular
                        <br>â¢ 2 canales (Web + WhatsApp)
                        <br>â¢ Embudo con calificaciÃ³n de leads
                        <br>â¢ IA con memoria breve
                        <br>â¢ IntegraciÃ³n n8n + pagos
                        <br>â¢ Dashboard de mÃ©tricas
                        <br><br>
                        ð¥ <strong>EMPRESARIAL - $199 USD/mes</strong>
                        <br>â¢ Multicanal + SLA
                        <br>â¢ IA avanzada y reglas
                        <br>â¢ Dashboards y reportes
                        <br>â¢ MÃºltiples integraciones
                        <br>â¢ Soporte 24/7
                        <br><br>
                        ð <strong>30 dÃ­as gratis + ROI garantizado</strong>`,
                        actions: ['demo', 'contacto']
                    },
                    'demo|prueba|test': {
                        text: `ð <strong>Â¡Perfecto! Te ayudo con tu demo gratuita.</strong>
                        <br><br>
                        <strong>Opciones disponibles:</strong>
                        <br>ð± WhatsApp: <a href="https://wa.me/522228588674?text=Hola%20quiero%20una%20demo" target="_blank">+52 222 858 8674</a>
                        <br>âï¸ Telegram: <a href="https://t.me/demo_bot" target="_blank">@demo_bot</a>
                        <br>ð Web: PruÃ©balo ahora mismo en este chat
                        <br><br>
                        Â¿QuÃ© tipo de chatbot te interesa?`,
                        actions: ['whatsapp', 'ecommerce', 'restaurante']
                    },
                    'whatsapp|wa': {
                        text: `ð± <strong>WhatsApp Business API - El canal mÃ¡s efectivo</strong>
                        <br><br>
                        â <strong>Funcionalidades:</strong>
                        <br>â¢ Mensajes con plantillas verificadas
                        <br>â¢ Botones interactivos y listas
                        <br>â¢ IntegraciÃ³n con catÃ¡logos
                        <br>â¢ Notificaciones automÃ¡ticas
                        <br>â¢ Chat en vivo con agentes
                        <br><br>
                        â <strong>Resultados tÃ­picos:</strong>
                        <br>â¢ +70% tasa de apertura
                        <br>â¢ +45% conversiÃ³n vs email
                        <br>â¢ -80% tiempo de respuesta
                        <br><br>
                        <a href="https://wa.me/522228588674" target="_blank">ð Hablar ahora por WhatsApp</a>`,
                        actions: ['contacto', 'precios']
                    },
                    'flujo|venta|automatizar': {
                        text: `ð¯ <strong>Creamos flujos que venden automÃ¡ticamente:</strong>
                        <br><br>
                        <strong>ð Resultados comprobados:</strong>
                        <br>â¢ +300% leads capturados
                        <br>â¢ +45% conversiÃ³n de ventas
                        <br>â¢ -80% costos de atenciÃ³n
                        <br>â¢ ROI promedio: 400-800%
                        <br><br>
                        <strong>ð­ Tipos de flujo disponibles:</strong>
                        <br>ðï¸ <strong>E-commerce:</strong> carrito, pagos, seguimiento
                        <br>ð½ï¸ <strong>Restaurante:</strong> reservas, menÃº, delivery
                        <br>ð¢ <strong>Servicios:</strong> leads, citas, propuestas`,
                        actions: ['ecommerce', 'restaurante', 'contacto']
                    },
                    'contacto|soporte|ayuda': {
                        text: `ð <strong>Nuestro equipo estÃ¡ aquÃ­ para ayudarte:</strong>
                        <br><br>
                        <strong>ð Contacto directo:</strong>
                        <br>â¢ WhatsApp: <a href="https://wa.me/522228588674" target="_blank">+52 222 858 8674</a>
                        <br>â¢ Email: <a href="mailto:jovany2224@gmail.com">jovany2224@gmail.com</a>
                        <br>â¢ Horario: Lun-Vie 9:00-18:00 (GMT-6)
                        <br><br>
                        <strong>ð Soporte premium 24/7:</strong>
                        <br>Disponible en planes Profesional y Empresarial`,
                        actions: ['whatsapp', 'demo']
                    }
                },
                quickActions: {
                    'demo': { icon: 'ð', text: 'Ver demo' },
                    'precios': { icon: 'ð°', text: 'Ver precios' },
                    'contacto': { icon: 'ð', text: 'Contactar' },
                    'whatsapp': { icon: 'ð±', text: 'WhatsApp' },
                    'ecommerce': { icon: 'ðï¸', text: 'E-commerce' },
                    'restaurante': { icon: 'ð½ï¸', text: 'Restaurante' }
                }
            };

            // CHAPI Assistant Class - Simplified and Robust
            class ChapiAssistant {
                constructor() {
                    this.isOpen = false;
                    this.init();
                }

                init() {
                    try {
                        this.setupElements();
                        this.setupEventListeners();
                        this.showWelcomeActions();
                        console.log('CHAPI: Assistant initialized successfully');
                    } catch (error) {
                        console.error('CHAPI Error:', error);
                        setTimeout(() => this.init(), 2000);
                    }
                }

                setupElements() {
                    this.chatButton = document.getElementById('chapiChatButton');
                    this.chatWindow = document.getElementById('chapiChatWindow');
                    this.closeBtn = document.getElementById('chapiCloseBtn');
                    this.sendBtn = document.getElementById('chapiSendBtn');
                    this.input = document.getElementById('chapiInput');
                    this.chatBody = document.getElementById('chapiChatBody');

                    if (!this.chatButton || !this.chatWindow || !this.input) {
                        throw new Error('Required elements not found');
                    }
                }

                setupEventListeners() {
                    this.chatButton.addEventListener('click', () => this.toggleChat());
                    this.closeBtn.addEventListener('click', () => this.closeChat());
                    this.sendBtn.addEventListener('click', () => this.sendMessage());
                    this.input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') this.sendMessage();
                    });

                    // Dynamic send button
                    this.input.addEventListener('input', () => {
                        if (this.input.value.trim()) {
                            this.sendBtn.textContent = 'â';
                            this.sendBtn.style.background = 'linear-gradient(135deg, #00d4a6, #1ae6b8)';
                        } else {
                            this.sendBtn.textContent = 'Enviar';
                            this.sendBtn.style.background = 'linear-gradient(135deg, #2f7afe, #00d4a6)';
                        }
                    });
                }

                toggleChat() {
                    this.isOpen = !this.isOpen;
                    this.chatWindow.classList.toggle('open', this.isOpen);
                    this.chatButton.textContent = this.isOpen ? 'Ã' : 'ð¬';

                    if (this.isOpen) {
                        this.input.focus();
                    }
                }

                closeChat() {
                    this.isOpen = false;
                    this.chatWindow.classList.remove('open');
                    this.chatButton.textContent = 'ð¬';
                }

                showWelcomeActions() {
                    setTimeout(() => {
                        this.addQuickActions(['precios', 'demo', 'whatsapp']);
                    }, 1000);
                }

                sendMessage() {
                    const message = this.input.value.trim();
                    if (!message) return;

                    this.addUserMessage(message);
                    this.input.value = '';
                    this.input.disabled = true;
                    this.sendBtn.disabled = true;

                    this.showTypingIndicator();
                    setTimeout(() => this.processMessage(message), 800 + Math.random() * 800);
                }

                addUserMessage(message) {
                    const userMessage = document.createElement('div');
                    userMessage.className = 'chapi-message user';
                    userMessage.textContent = message;
                    this.chatBody.appendChild(userMessage);
                    this.scrollToBottom();
                }

                showTypingIndicator() {
                    const indicator = document.createElement('div');
                    indicator.className = 'chapi-message';
                    indicator.id = 'typingIndicator';
                    indicator.innerHTML = '<em>ð¤ CHAPI estÃ¡ escribiendo...</em>';
                    indicator.style.fontStyle = 'italic';
                    indicator.style.color = '#4a8bff';
                    this.chatBody.appendChild(indicator);
                    this.scrollToBottom();
                }

                removeTypingIndicator() {
                    const indicator = document.getElementById('typingIndicator');
                    if (indicator) indicator.remove();
                }

                processMessage(message) {
                    this.removeTypingIndicator();

                    let response = null;
                    let actions = [];

                    // Find matching response
                    for (const [pattern, config] of Object.entries(CHAPI_CONFIG.responses)) {
                        if (new RegExp(pattern, 'i').test(message)) {
                            response = config.text;
                            actions = config.actions || [];
                            break;
                        }
                    }

                    // Default response
                    if (!response) {
                        response = `Â¡Gracias por contactarnos! ð
                        <br><br>
                        Para una atenciÃ³n personalizada sobre "<em>${message}</em>", puedes:
                        <br><br>
                        ð± <strong>WhatsApp:</strong> <a href="https://wa.me/522228588674" target="_blank">+52 222 858 8674</a>
                        <br>âï¸ <strong>Email:</strong> <a href="mailto:jovany2224@gmail.com">jovany2224@gmail.com</a>
                        <br><br>
                        O pregÃºntame sobre:`;
                        actions = ['precios', 'demo', 'whatsapp'];
                    }

                    this.addBotMessage(response);
                    if (actions.length > 0) {
                        setTimeout(() => this.addQuickActions(actions), 300);
                    }

                    this.input.disabled = false;
                    this.sendBtn.disabled = false;
                    this.input.focus();
                }

                addBotMessage(html) {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chapi-message';
                    botMessage.innerHTML = html;
                    this.chatBody.appendChild(botMessage);
                    this.scrollToBottom();
                }

                addQuickActions(actionKeys) {
                    const container = document.createElement('div');
                    container.className = 'chapi-quick-actions';

                    actionKeys.forEach(key => {
                        const config = CHAPI_CONFIG.quickActions[key];
                        if (!config) return;

                        const button = document.createElement('button');
                        button.className = 'chapi-quick-action-btn';
                        button.textContent = `${config.icon} ${config.text}`;

                        button.addEventListener('click', () => {
                            this.input.value = key;
                            this.sendMessage();
                        });

                        container.appendChild(button);
                    });

                    this.chatBody.appendChild(container);
                    this.scrollToBottom();
                }

                scrollToBottom() {
                    this.chatBody.scrollTop = this.chatBody.scrollHeight;
                }
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => new ChapiAssistant());
            } else {
                new ChapiAssistant();
            }

            // Animation on scroll
            function animateOnScroll() {
                const elements = document.querySelectorAll('.loading');
                elements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;

                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('animate-fadeInUp');
                        element.classList.remove('loading');
                    }
                });
            }

            window.addEventListener('scroll', animateOnScroll);
            document.addEventListener('DOMContentLoaded', animateOnScroll);
        </script>
    </body>
</html>
