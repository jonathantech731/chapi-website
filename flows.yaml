# ğŸ¤– CHAPI Assistant - Flujos Conversacionales
# Sistema de flujos programados para asistente inteligente

flows:
  # ===========================================
  # FLUJO PRINCIPAL: DESCUBRIMIENTO DE LEADS
  # ===========================================
  main_flow:
    steps:
      - id: "welcome"
        message: "Â¡Hola! ğŸ‘‹ Soy **CHAPI**, tu asistente de chatbots inteligentes.\n\nÂ¿En quÃ© **sector** trabaja tu negocio?"
        options:
          - text: "ğŸ• Restaurante/Comida"
            next: "sector_restaurant"
          - text: "ğŸ›’ E-commerce/Tienda"
            next: "sector_ecommerce"
          - text: "ğŸ¢ Servicios Profesionales"
            next: "sector_services"
          - text: "ğŸ¥ Salud/Medicina"
            next: "sector_health"
          - text: "ğŸ“ EducaciÃ³n"
            next: "sector_education"
          - text: "ğŸ“ˆ Marketing/Agencia"
            next: "sector_marketing"
          - text: "ğŸ  Inmobiliaria"
            next: "sector_real_estate"
          - text: "ğŸ”§ Otro sector"
            next: "sector_other"

      # ===========================================
      # SECTORES ESPECÃFICOS
      # ===========================================
      - id: "sector_restaurant"
        sector: "restaurante"
        message: "ğŸ• **Â¡Perfecto! Especialista en restaurantes aquÃ­.**\n\nNuestros bots automatizan:\nâ€¢ Toma de pedidos 24/7\nâ€¢ MenÃº interactivo con fotos\nâ€¢ CÃ¡lculo de delivery automÃ¡tico\nâ€¢ ConfirmaciÃ³n de Ã³rdenes\n\n**ğŸ“Š Â¿CuÃ¡ntas consultas/pedidos reciben al dÃ­a aproximadamente?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_ecommerce"
        sector: "ecommerce"
        message: "ğŸ›’ **Â¡Excelente! Experto en e-commerce.**\n\nAutomatizamos:\nâ€¢ CatÃ¡logo con bÃºsqueda inteligente\nâ€¢ Proceso de compra completo\nâ€¢ Seguimiento de pedidos\nâ€¢ Soporte post-venta 24/7\n\n**ğŸ“Š Â¿CuÃ¡ntos clientes/consultas atienden diariamente?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_services"
        sector: "servicios"
        message: "ğŸ¢ **Â¡Perfecto! Especialista en servicios profesionales.**\n\nOptimizamos:\nâ€¢ Agendado de citas automÃ¡tico\nâ€¢ InformaciÃ³n de servicios 24/7\nâ€¢ CalificaciÃ³n de leads inteligente\nâ€¢ Seguimiento automatizado\n\n**ğŸ“Š Â¿CuÃ¡ntos clientes potenciales los contactan al dÃ­a?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_health"
        sector: "salud"
        message: "ğŸ¥ **Â¡Excelente! Especialista en sector salud.**\n\nFacilitamos:\nâ€¢ Agendado de citas mÃ©dicas\nâ€¢ InformaciÃ³n de servicios mÃ©dicos\nâ€¢ Recordatorios automÃ¡ticos\nâ€¢ Triaje bÃ¡sico de sÃ­ntomas\n\n**ğŸ“Š Â¿CuÃ¡ntos pacientes los contactan diariamente?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_education"
        sector: "educacion"
        message: "ğŸ“ **Â¡Perfecto! Especialista en educaciÃ³n.**\n\nAutomatizamos:\nâ€¢ InformaciÃ³n de cursos y programas\nâ€¢ Proceso de inscripciones\nâ€¢ Soporte a estudiantes 24/7\nâ€¢ Seguimiento acadÃ©mico\n\n**ğŸ“Š Â¿CuÃ¡ntas consultas de estudiantes reciben al dÃ­a?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_marketing"
        sector: "marketing"
        message: "ğŸ“ˆ **Â¡Excelente! Especialista en agencias.**\n\nPotenciamos:\nâ€¢ CalificaciÃ³n de leads automÃ¡tica\nâ€¢ PresentaciÃ³n de servicios 24/7\nâ€¢ Agendado de reuniones\nâ€¢ Seguimiento de prospects\n\n**ğŸ“Š Â¿CuÃ¡ntos leads generan diariamente?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_real_estate"
        sector: "inmobiliaria"
        message: "ğŸ  **Â¡Perfecto! Especialista en inmobiliaria.**\n\nOptimizamos:\nâ€¢ BÃºsqueda de propiedades\nâ€¢ Agendado de visitas\nâ€¢ CalificaciÃ³n de compradores\nâ€¢ Seguimiento de interesados\n\n**ğŸ“Š Â¿CuÃ¡ntos interesados los contactan al dÃ­a?**"
        input_type: "number"
        next: "daily_queries"

      - id: "sector_other"
        sector: "otro"
        message: "ğŸ”§ **Â¡Sin problema! Trabajamos con todos los sectores.**\n\nÂ¿PodrÃ­as contarme especÃ­ficamente a quÃ© se dedica tu negocio?\n\n**ğŸ“Š TambiÃ©n, Â¿cuÃ¡ntas consultas reciben al dÃ­a aproximadamente?**"
        input_type: "text"
        next: "daily_queries"

      # ===========================================
      # ANÃLISIS DE VOLUMEN
      # ===========================================
      - id: "daily_queries"
        message: "**ğŸ“Š Perfecto, {daily_queries} consultas diarias.**\n\nÂ¿CuÃ¡l es tu **objetivo principal** con un chatbot?\n\n**Selecciona tu prioridad:**"
        options:
          - text: "ğŸ• Atender fuera de horario"
            goal: "24_7_service"
            next: "goal_analysis"
          - text: "âš¡ Responder mÃ¡s rÃ¡pido"
            goal: "speed"
            next: "goal_analysis"
          - text: "ğŸ’° Generar mÃ¡s ventas"
            goal: "sales"
            next: "goal_analysis"
          - text: "ğŸ¤– Automatizar respuestas repetitivas"
            goal: "automation"
            next: "goal_analysis"
          - text: "ğŸ“ˆ Capturar mÃ¡s leads"
            goal: "lead_capture"
            next: "goal_analysis"
          - text: "ğŸ¯ Calificar mejor a los clientes"
            goal: "lead_qualification"
            next: "goal_analysis"

      # ===========================================
      # ANÃLISIS POR OBJETIVO
      # ===========================================
      - id: "goal_analysis"
        message: "**ğŸ¯ Excelente elecciÃ³n: {goal_name}**\n\n**Para tu sector ({sector}) con {daily_queries} consultas diarias, mi recomendaciÃ³n es:**\n\n{recommendation}\n\n**ğŸ’¡ Â¿Te gustarÃ­a ver un demo personalizado de cÃ³mo funcionarÃ­a en tu negocio?**"
        options:
          - text: "âœ… SÃ­, quiero ver el demo"
            next: "demo_request"
          - text: "ğŸ’° Primero dime los precios"
            next: "pricing"
          - text: "â“ Tengo algunas preguntas"
            next: "questions"

      # ===========================================
      # DEMOSTRACIÃ“N
      # ===========================================
      - id: "demo_request"
        message: "**ğŸ‰ Â¡Perfecto! Te voy a preparar un demo personalizado.**\n\n**Para hacer el demo mÃ¡s relevante, necesito:**"
        form:
          - field: "company_name"
            label: "Nombre de tu empresa/negocio"
            type: "text"
            required: true
          - field: "contact_name"
            label: "Tu nombre"
            type: "text"
            required: true
          - field: "phone"
            label: "WhatsApp/TelÃ©fono"
            type: "phone"
            required: true
          - field: "email"
            label: "Email (opcional)"
            type: "email"
            required: false
        next: "demo_confirmation"

      - id: "demo_confirmation"
        message: "**ğŸš€ Â¡Listo {contact_name}!**\n\n**Tu demo personalizado para {company_name} incluirÃ¡:**\n\nâœ… SimulaciÃ³n real para sector {sector}\nâœ… Flujos especÃ­ficos para tus {daily_queries} consultas diarias\nâœ… IntegraciÃ³n con WhatsApp Business\nâœ… Panel de administraciÃ³n en vivo\n\n**â° Â¿CuÃ¡ndo te viene bien la demostraciÃ³n?**"
        options:
          - text: "ğŸ“ Llamada hoy mismo"
            next: "schedule_today"
          - text: "ğŸ“… MaÃ±ana por la maÃ±ana"
            next: "schedule_tomorrow"
          - text: "ğŸ—“ï¸ Esta semana (tu eliges)"
            next: "schedule_week"
          - text: "ğŸ“§ EnvÃ­ame info por email"
            next: "send_email"

      # ===========================================
      # PROGRAMACIÃ“N DE DEMO
      # ===========================================
      - id: "schedule_today"
        message: "**ğŸ“ Â¡Excelente! Demo para hoy.**\n\n**Te contactarÃ© por WhatsApp al {phone} en las prÃ³ximas 2 horas.**\n\n**Mientras tanto:**\nâ€¢ Prepara 3 preguntas frecuentes de tus clientes\nâ€¢ Ten a mano tu catÃ¡logo o servicios\nâ€¢ Piensa en tu horario de atenciÃ³n actual\n\n**ğŸ’¬ Â¿Alguna pregunta urgente antes del demo?**"
        actions: ["send_lead_notification", "schedule_immediate_followup"]
        next: "final_questions"

      - id: "schedule_tomorrow"
        message: "**ğŸ“… Demo programado para maÃ±ana.**\n\n**Te escribirÃ© por WhatsApp al {phone} maÃ±ana entre 9-11 AM.**\n\n**Para aprovechar mejor el demo:**\nâ€¢ Lista tus 5 preguntas mÃ¡s frecuentes\nâ€¢ Ten tu catÃ¡logo/servicios a mano\nâ€¢ Define tu horario de atenciÃ³n ideal\n\n**ğŸ“‹ Te envÃ­o un recordatorio esta noche. Â¿Todo correcto?**"
        actions: ["send_lead_notification", "schedule_reminder"]
        next: "final_questions"

      # ===========================================
      # PRECIOS
      # ===========================================
      - id: "pricing"
        message: "**ğŸ’° Te explico mis 3 paquetes para MÃ©xico:**\n\n**ğŸ¥‰ BÃSICO - $599/mes**\nâ€¢ Bot informativo + FAQ\nâ€¢ Horarios automÃ¡ticos\nâ€¢ 3 flujos de conversaciÃ³n\nâ€¢ Ideal: {basic_ideal}\n\n**ğŸ¥ˆ PREMIUM - $999/mes** â­\nâ€¢ Todo lo bÃ¡sico +\nâ€¢ CatÃ¡logo interactivo\nâ€¢ Toma de pedidos/citas\nâ€¢ WhatsApp Business\nâ€¢ Ideal: {premium_ideal}\n\n**ğŸ¥‡ ULTRA - $1,599/mes**\nâ€¢ Todo lo premium +\nâ€¢ IA personalizada\nâ€¢ Integraciones CRM\nâ€¢ Analytics avanzados\nâ€¢ Ideal: {ultra_ideal}\n\n**Para tu caso ({sector}, {daily_queries} consultas): Recomiendo {recommended_plan}**\n\n**Â¿CuÃ¡l te interesa mÃ¡s?**"
        options:
          - text: "ğŸ¥‰ BÃ¡sico - $599"
            plan: "basic"
            next: "plan_details"
          - text: "ğŸ¥ˆ Premium - $999"
            plan: "premium"
            next: "plan_details"
          - text: "ğŸ¥‡ Ultra - $1,599"
            plan: "ultra"
            next: "plan_details"
          - text: "ğŸ’¬ Quiero negociar/preguntar"
            next: "negotiate"

# ===========================================
# RESPUESTAS DINÃMICAS POR SECTOR/OBJETIVO
# ===========================================
recommendations:
  restaurante:
    "24_7_service": "Un bot que tome pedidos automÃ¡ticamente fuera de horario. PodrÃ­as capturar 20-30% mÃ¡s ventas solo con atenciÃ³n nocturna."
    "speed": "MenÃº interactivo instantÃ¡neo. Clientes ven fotos, precios y ordenan en 60 segundos."
    "sales": "Bot upselling automÃ¡tico. 'Con tu pizza, Â¿agregas bebida por $25?' Incrementa ticket promedio 35%."
    "automation": "Bot que responda horarios, precios, tiempo de entrega. Libera tu tiempo para cocinar."
    "lead_capture": "Bot que capte datos para promociones. 'RegÃ­strate y obtÃ©n 20% descuento en tu prÃ³xima orden.'"

  ecommerce:
    "24_7_service": "Tienda abierta 24/7. Bot procesa Ã³rdenes mientras duermes. Clientes nocturnos son 40% mÃ¡s impulsivos."
    "speed": "CatÃ¡logo con bÃºsqueda instantÃ¡nea. Cliente encuentra producto en 10 segundos vs 5 minutos."
    "sales": "Bot con abandono de carrito. 'Olvidaste tu producto, aquÃ­ tienes 15% descuento.' Recupera 25% de ventas perdidas."
    "automation": "ConfirmaciÃ³n automÃ¡tica, tracking, FAQs. Reduces 80% de mensajes repetitivos."
    "lead_capture": "Lead magnet automatizado. 'Descarga nuestra guÃ­a gratis' captura emails 24/7."

  servicios:
    "24_7_service": "Agendado automÃ¡tico fuera de horario. Clientes reservan citas cuando les conviene."
    "speed": "InformaciÃ³n instantÃ¡nea de servicios y precios. Cliente calificado en 2 minutos."
    "sales": "Bot que califique presupuesto antes de contactarte. Solo recibes leads listos para contratar."
    "automation": "FAQ automÃ¡tico sobre servicios, horarios, precios. Tu tiempo solo para clientes reales."
    "lead_capture": "Formulario inteligente que capture necesidades especÃ­ficas antes de la cita."

# ===========================================
# PLANTILLAS DE MENSAJE POR SECTOR
# ===========================================
sector_templates:
  restaurante:
    basic_ideal: "Restaurantes familiares, cocinas caseras"
    premium_ideal: "Restaurantes establecidos, franquicias pequeÃ±as"
    ultra_ideal: "Cadenas, restaurantes con delivery mÃºltiple"
    recommended_plan: "Premium (perfecto para automatizar pedidos)"

  ecommerce:
    basic_ideal: "Tiendas pequeÃ±as, emprendimientos"
    premium_ideal: "E-commerce establecido, tiendas digitales"
    ultra_ideal: "E-commerce grande, marketplaces"
    recommended_plan: "Premium (ideal para catÃ¡logo + ventas)"

  servicios:
    basic_ideal: "Consultorios, servicios locales"
    premium_ideal: "Empresas establecidas, agencias"
    ultra_ideal: "Corporativos, servicios especializados"
    recommended_plan: "BÃ¡sico o Premium (segÃºn volumen)"

# ===========================================
# CONFIGURACIÃ“N DE ACCIONES
# ===========================================
actions:
  send_lead_notification:
    type: "email"
    to: "leads@chapibot.pro"
    subject: "ğŸ”¥ NUEVO LEAD CALIFICADO - {company_name}"
    template: "lead_notification"

  schedule_reminder:
    type: "schedule"
    delay: "1 day"
    action: "send_whatsapp_reminder"

  schedule_immediate_followup:
    type: "schedule"
    delay: "2 hours"
    action: "call_lead"

# ===========================================
# FALLBACKS Y MANEJO DE ERRORES
# ===========================================
fallbacks:
  no_match:
    message: "ğŸ¤” No entendÃ­ bien. Â¿PodrÃ­as reformular? O elige una de estas opciones:"
    options:
      - text: "ğŸ”„ Empezar de nuevo"
        next: "welcome"
      - text: "ğŸ’¬ Hablar con humano"
        next: "human_handoff"
      - text: "ğŸ“§ Enviar info por email"
        next: "send_email"

  human_handoff:
    message: "ğŸ‘¨â€ğŸ’» **Te conecto con un especialista humano.**\n\nEscrÃ­benos directamente a:\nğŸ“± WhatsApp: +52 123 456 7890\nğŸ“§ Email: soporte@chapibot.pro\n\n**Horario:** Lunes a Viernes 9 AM - 6 PM\n\n**Menciona:** 'Vengo del chat web' para atenciÃ³n prioritaria."

  technical_error:
    message: "âš ï¸ **Error tÃ©cnico temporal.**\n\nPor favor:\n1. Recarga la pÃ¡gina\n2. Si persiste, escrÃ­benos a soporte@chapibot.pro\n\n**Mientras tanto, agenda una llamada:**\nğŸ“… https://calendly.com/chapibot\nğŸ“± WhatsApp: +52 123 456 7890"
